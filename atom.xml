<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>崎径 其镜</title>
  <subtitle>求学道路上的行车记录仪</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://www.z16388.top/"/>
  <updated>2018-11-10T12:34:02.951Z</updated>
  <id>http://www.z16388.top/</id>
  
  <author>
    <name>Anqi Zhao</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>生成Java版Anysdk的aar</title>
    <link href="http://www.z16388.top/2018/11/10/anysdk/"/>
    <id>http://www.z16388.top/2018/11/10/anysdk/</id>
    <published>2018-11-10T11:46:31.000Z</published>
    <updated>2018-11-10T12:34:02.951Z</updated>
    
    <content type="html"><![CDATA[<p>&emsp;&emsp;在接入Anysdk的时候，我选择了Java的框架。虽然使用Unity版本的会更加方便，直接拖进去就完成了安装步骤，但是不利于控制项目dex文件的大小，不得不进行分包。但是官方提供的是Eclipse的版本，如果想要更好的使用，我们必须把这些东西生成为aar。</p>
<p>&emsp;&emsp;首先，在Android Studio的工程中新建一个library，给的文件拷贝到相应的目录下。需要注意的是，res需要拷贝到src/main/res里。</p>
<p>&emsp;&emsp;如果直接打包的话，我们会发现lib下的armeabi-v7a没有参与打包，缺了so文件怎么能行。这时候，需要在library下的build.gradle中进行配置。</p>
<p>&emsp;&emsp;在buildTypes同级的地方，增加这些代码：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">sourceSets &#123;</div><div class="line">    main &#123;</div><div class="line">        jniLibs.srcDirs = ['libs']</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>&emsp;&emsp;这里指定了，“在libs目录下寻找so文件”。配置好之后，按照anysdk的文档写好java代码，配好manifest，就可以生成anysdk的aar了。</p>
<p>$$ f(x,y,z) = 3y^2z \left( 3+\frac{7x+5}{1+y^2} \right) $$</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&amp;emsp;&amp;emsp;在接入Anysdk的时候，我选择了Java的框架。虽然使用Unity版本的会更加方便，直接拖进去就完成了安装步骤，但是不利于控制项目dex文件的大小，不得不进行分包。但是官方提供的是Eclipse的版本，如果想要更好的使用，我们必须把这些东西生成为a
    
    </summary>
    
    
      <category term="Android" scheme="http://www.z16388.top/tags/Android/"/>
    
      <category term="Anysdk" scheme="http://www.z16388.top/tags/Anysdk/"/>
    
      <category term="Unity" scheme="http://www.z16388.top/tags/Unity/"/>
    
  </entry>
  
  <entry>
    <title>Android逆向笔记</title>
    <link href="http://www.z16388.top/2018/11/10/android-d/"/>
    <id>http://www.z16388.top/2018/11/10/android-d/</id>
    <published>2018-11-10T10:32:08.000Z</published>
    <updated>2018-11-10T12:12:42.811Z</updated>
    
    <content type="html"><![CDATA[<p>&emsp;&emsp;这几周，一直在倒腾安卓apk相关的东西，前面那一篇<a href="http://z16388.github.io/2018/10/21/cmdapk" target="_blank" rel="external">命令行修改apk工具</a>就是倒腾的一个中间产物。但是命令行工具还是有它的局限性，随着作死的幅度越来越大已经无法满足我的需求了，便改用python来实现这个工具。大家可以参考这个项目来进行修改<a href="https://github.com/z16388/cs_game_lib" target="_blank" rel="external">https://github.com/z16388/cs_game_lib</a>。后面还有一些扩展的代码没有暂时加入到项目中，打算完善之后提交上去。这篇还会继续更新，可以参考后面的代码结合项目达到你的目的。</p>
<h2 id="关于Apk"><a href="#关于Apk" class="headerlink" title="关于Apk"></a>关于Apk</h2><p>&emsp;&emsp;apk就是一个zip，可以直接解压进行修改，这也是我前一篇中修改apk的方式。但是它不是普通的zip，需要一个签名，否则无法进行安装。但是如果直接进行解压，它里面会有一些二进制化的东西，不方便修改。这时候，我们可以使用apktool进行解包，这样得到的都是文本化的内容了。除此之外，解包比解压能得到更多的res信息，而且不需要我们手动删除签名文件夹。</p>
<h2 id="Apktool"><a href="#Apktool" class="headerlink" title="Apktool"></a>Apktool</h2><p>&emsp;&emsp;Apktool是一个jar文件，官网是<a href="https://ibotpeaches.github.io/Apktool/" target="_blank" rel="external">https://ibotpeaches.github.io/Apktool/</a>。可以参考它的文档进行使用，但是会发现，命令行会变得很奇怪，而且是开了一个新的窗口，我们后面命令行的代码不会顺利执行，就很难受。后来发现，它的命令其实是执行同目录下的一个bat脚本文件，而且是加了参数的。所以，在使用apktool时候，我比较推荐直接调用jar,以解包为例。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">java -jar -Duser.language=zh_cn -Dfile.encoding=UTF-8 apktool.jar d [file name] -o [decode path]</div></pre></td></tr></table></figure>
<p>&emsp;&emsp;我们常用的命令其实就是解包和打包：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">apktool d xxx.apk</div><div class="line">apktool b xxx</div></pre></td></tr></table></figure>
<p>&emsp;&emsp;打包之后，是没有META-INF文件夹的，可以直接签名。关于签名相关的内容可以参考：<a href="http://z16388.github.io/2018/10/21/cmdapk" target="_blank" rel="external">命令行修改apk工具</a>。</p>
<h2 id="APK解包后的结构"><a href="#APK解包后的结构" class="headerlink" title="APK解包后的结构"></a>APK解包后的结构</h2><p>&emsp;&emsp;解包后的APK目录是会变的，如果进行了打包，那么回在该目录下生成一个build目录。但是基础的会有下面这些：</p>
<ul>
<li>assest</li>
<li>lib</li>
<li>original</li>
<li>res</li>
<li>smali</li>
<li>unknown</li>
</ul>
<p>&emsp;&emsp;除此之外，还有文本化的manifest文件。</p>
<p>&emsp;&emsp;想要修改app安装后的名称，可以去res/values/strings.xml，找到app_ame的字段进行修改。</p>
<p>&emsp;&emsp;想要修改权限可以直接修改manifest文件。</p>
<p>&emsp;&emsp;但是想要修改包名就不是那么简单的事情了，需要反编译smali文件成java，修改目录和包名在反编译回去。这个骚操作还是在计划中，暂时没有实现。</p>
<p>&emsp;&emsp;需要注意的是，如果使用Python原生的xml库区修改安卓的xml的时候，会改变xml文件的名空间。原先满页的android名空间变成了奇怪的ag0。这个问题我还在寻找解决方案。如果完成了，那么关于权限和应用名的修改就可以实现自动化了。</p>
<p>&emsp;&emsp;解包的代码如下，可以替换上面github项目中的解压代码。</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#coding=utf-8</span></div><div class="line"> </div><div class="line"><span class="keyword">import</span> os,os.path</div><div class="line"><span class="keyword">from</span> shutil <span class="keyword">import</span> rmtree</div><div class="line"> </div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">decode_apk</span><span class="params">(filename, decode_folder)</span>:</span></div><div class="line">    <span class="keyword">if</span> os.path.exists(decode_folder):</div><div class="line">        rmtree(decode_folder)</div><div class="line">        <span class="keyword">print</span> <span class="string">"删除已存在的文件夹"</span>+decode_folder</div><div class="line">    <span class="keyword">print</span> <span class="string">"开始解包"</span>+filename+<span class="string">"-&gt;"</span>+decode_folder</div><div class="line">    apktool_command = <span class="string">"java -jar -Duser.language=zh_cn -Dfile.encoding=UTF8 apktool.jar d "</span> + filename + <span class="string">" -o "</span> + decode_folder</div><div class="line">    os.system(apktool_command)</div><div class="line">    <span class="keyword">print</span> <span class="string">"解包成功"</span>+filename+<span class="string">"-&gt;"</span>+decode_folder</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">build_apk</span><span class="params">(folder, apk_out)</span>:</span></div><div class="line">    <span class="keyword">if</span> os.access(apk_out,os.R_OK):</div><div class="line">        <span class="keyword">print</span> <span class="string">"删除已存在的"</span>+apk_out</div><div class="line">        os.remove(apk_out)</div><div class="line">    <span class="keyword">print</span> <span class="string">"打包中"</span>+apk_out</div><div class="line">    apktool_command = <span class="string">"java -jar -Duser.language=zh_cn -Dfile.encoding=UTF8 apktool.jar b "</span> + folder + <span class="string">" -o "</span> + apk_out</div><div class="line">    os.system(apktool_command)</div><div class="line">    <span class="keyword">print</span> <span class="string">"打包成功"</span>+apk_out</div></pre></td></tr></table></figure>
<p>&emsp;&emsp;脚本需要和apktool.jar在同一目录下，否则命令中需要指定路径。</p>
<h2 id="关于签名"><a href="#关于签名" class="headerlink" title="关于签名"></a>关于签名</h2><p>&emsp;&emsp;打包后签名的方法，在这一篇里已经提到了<a href="http://z16388.github.io/2018/10/21/cmdapk" target="_blank" rel="external">命令行修改apk工具</a>。</p>
<p>&emsp;&emsp;需要注意的是，keystore文件是使用eclipse生成的签名文件，算，如果你的应用是使用Android Studio生成的签名，那将是jks文件。(这可是个不错的番号啊…)</p>
<p>&emsp;&emsp;生成jks文件：在Build菜单中，找到Generate Signed Apk选项，在弹出的窗口中选择Create new，填写相关内容，即可创建签名文件。</p>
<p>&emsp;&emsp;如果非要使用keystore，可以使用keytool进行转换，jks文件经过p12文件中转可以转换成keystore文件，代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">keytool -importkeystore -srckeystore xxx.jks -srcstoretype JKS -deststoretype PKCS12 -destkeystore xxx.p12</div><div class="line">keytool -v -importkeystore -srckeystore xxx.p12 -srcstoretype PKCS12 -destkeystore xxx.keystore -deststoretype JKS</div></pre></td></tr></table></figure>
<p>&emsp;&emsp;除此之外，还可以使用keytool直接生成keystore签名。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">keytool -genkeypair -alias serverkey -keypass 111111 -storepass 111111 -dname &quot;C=CN,ST=GD,L=SZ,O=vihoo,OU=dev,CN=vihoo.com&quot; -keyalg RSA -keysize 2048 -validity 3650 -keystore server.keystore</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&amp;emsp;&amp;emsp;这几周，一直在倒腾安卓apk相关的东西，前面那一篇&lt;a href=&quot;http://z16388.github.io/2018/10/21/cmdapk&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;命令行修改apk工具&lt;/a&gt;就是倒
    
    </summary>
    
    
      <category term="Python" scheme="http://www.z16388.top/tags/Python/"/>
    
      <category term="Android" scheme="http://www.z16388.top/tags/Android/"/>
    
  </entry>
  
  <entry>
    <title>关于新版(28, 9.0)Android的坑</title>
    <link href="http://www.z16388.top/2018/11/10/androidversionkeng/"/>
    <id>http://www.z16388.top/2018/11/10/androidversionkeng/</id>
    <published>2018-11-10T09:34:38.000Z</published>
    <updated>2018-11-10T10:16:30.012Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Android-9-0"><a href="#Android-9-0" class="headerlink" title="Android 9.0"></a>Android 9.0</h1><p>&emsp;&emsp;前几天出包就出现了一个非常痛心的事情。发现使用刚发售的，搭载安卓9.0系统的手机无法进行热更的。这就很难受了。各种去查，发现是在10月31日晚上，SDK突然更新了，增加了新的版本28，也就是安卓9.0。</p>
<p>&emsp;&emsp;Unity和安卓9.0的矛盾是，网络相关的东西会受到影响。目前知道的还有Unity的后台统计也是无法使用的，当时清了整个后台，一天多都是白白的，一个Bug都没有，难受。</p>
<p>&emsp;&emsp;解决方法就是到sdk目录中把28给删了，最高版本使用27。然后打出的包解包看一下manifest，确认版本是27，以防止不兼容安卓9.0。这个在传到谷歌商店中构建版本时也是可以确认的。</p>
<h1 id="Android-9-0-1"><a href="#Android-9-0-1" class="headerlink" title="Android 9.0"></a>Android 9.0</h1><p>&emsp;&emsp;在接某第三方sdk的时候遇到了另一个问题，发现他们的sdk在8.0的系统里无法使用。logcat之后发现是他们使用了一个无法在全屏模式下使用的属性。这其实是一个8.0.0版本的bug，在8.1版本中得到了修复，我也用手边的诺基亚7升级了系统，验证了这一点。</p>
<p>&emsp;&emsp;然后他们在第二天就更新了sdk版本，可喜可贺，可喜可贺~</p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Android-9-0&quot;&gt;&lt;a href=&quot;#Android-9-0&quot; class=&quot;headerlink&quot; title=&quot;Android 9.0&quot;&gt;&lt;/a&gt;Android 9.0&lt;/h1&gt;&lt;p&gt;&amp;emsp;&amp;emsp;前几天出包就出现了一个非常痛心的事情。发现使
    
    </summary>
    
    
      <category term="Android" scheme="http://www.z16388.top/tags/Android/"/>
    
  </entry>
  
  <entry>
    <title>命令行修改apk工具</title>
    <link href="http://www.z16388.top/2018/10/21/cmdapk/"/>
    <id>http://www.z16388.top/2018/10/21/cmdapk/</id>
    <published>2018-10-21T06:24:25.000Z</published>
    <updated>2018-11-10T10:32:59.008Z</updated>
    
    <content type="html"><![CDATA[<h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>&emsp;&emsp;在前一段时间的工作中，我得到了一个新的任务，写一个命令行工具，修改apk中的某个文件，再进行重新打包。这个过程实际上十分简单：首先，apk文件就是一个zip文件，但是在安装的时候安卓系统会校验签名，因此我们需要对重新打包的apk进行签名。下面是实现这个工具的重难点和具体思路：</p>
<h2 id="命令行数组"><a href="#命令行数组" class="headerlink" title="命令行数组"></a>命令行数组</h2><p>&emsp;&emsp;如果想要生成一批apk，他们中需要修改的位置都是相同的，只有写入的文本不同。那么，第一时间我们会想到字符串数组。但是在命令行中是没有数组的，有的文章采用本地文件逐行读取的方法，但我们也可以使用下面的方法来对数组进行模拟:</p>
<p><a href="https://www.yiibai.com/batch_script/batch_script_arrays.html" target="_blank" rel="external">参考资料：</a><a href="https://www.yiibai.com/batch_script/batch_script_arrays.html" target="_blank" rel="external">https://www.yiibai.com/batch_script/batch_script_arrays.html</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">@echo off</div><div class="line">set a[0]=1 </div><div class="line">set a[1]=2 </div><div class="line">set a[2]=3 </div><div class="line">echo The first element of the array is %a[0]% </div><div class="line">echo The second element of the array is %a[1]% </div><div class="line">echo The third element of the array is %a[2]%</div></pre></td></tr></table></figure>
<h2 id="批处理压缩与解压缩"><a href="#批处理压缩与解压缩" class="headerlink" title="批处理压缩与解压缩"></a>批处理压缩与解压缩</h2><p>&emsp;&emsp;在windows环境中，我们不能方便地像隔壁那样，直接调用zip和unzip命令进行压缩和解压，需要下载相应的程序来帮助我们完成这一过程。<a href="http://stahlworks.com/dev/index.php?tool=zipunzip" target="_blank" rel="external">下载地址：</a><a href="http://stahlworks.com/dev/index.php?tool=zipunzip" target="_blank" rel="external">http://stahlworks.com/dev/index.php?tool=zipunzip</a></p>
<p>&emsp;&emsp;下载完两个exe文件之后，我们将它放在与脚本相同目录下或者是<code>C:/Windows</code>目录下，推荐后者，然后就可以使用压缩与解压缩命令了。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">zip -r fileName.apk ./*</div></pre></td></tr></table></figure>
<p>&emsp;&emsp;这里的命令是将当前目录压缩为指定名称的apk文件，其中参数-r为递归压缩子目录下所有文件。不加的话只会得到一个空的文件夹。这里需要注意的是，在打包apk的时候，我们需要cd到解压好的文件目录下进行压缩，否则会出现压缩好之后的apk因为打开后是一个文件夹，不是标准apk目录结构的情况而无法进行安装。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">unzip -o -d /path fileName.apk</div></pre></td></tr></table></figure>
<p>&emsp;&emsp;这里的命令是将指定apk解压到指定的目录中，-o是不提示覆盖，-d是指定路径。</p>
<h2 id="关于apk签名"><a href="#关于apk签名" class="headerlink" title="关于apk签名"></a>关于apk签名</h2><p>&emsp;&emsp;我们可以通过下面的方法对apk的签名进行查看：解压出位于<code>META-INF</code>位置下的CERT.RSA文件，使用命令查看:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">keytool -printcert -file [file path]</div></pre></td></tr></table></figure>
<p>&emsp;&emsp;想要对apk重新签名，需要删除apk中原先的签名文件。有博客说删掉两个文件就行，但是会出现错误。<code>jarsigner: java.lang.SecurityException:SHA1 digest error for META-INF/CERT.RSA</code>根据stack overflow上某个老哥给的答案：<a href="https://stackoverflow.com/questions/37513084/jarsigner-java-lang-securityexceptionsha1-digest-error-for-meta-inf-cert-rsa-a" target="_blank" rel="external">https://stackoverflow.com/questions/37513084/jarsigner-java-lang-securityexceptionsha1-digest-error-for-meta-inf-cert-rsa-a</a>我们需要删除整个META-INF文件进行</p>
<p>&emsp;&emsp;apk的重新签名需要项目的证书文件，后缀名为：<code>.keystores</code>，命令为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">jarsigner -verbose -keystore [keystore path] -signedjar [out apk name].apk [current apk name].apk [alias name] -storepass [password]</div></pre></td></tr></table></figure>
<p>&emsp;&emsp;这里需要填写的参数分别是证书文件的路径、签名后apk名及路径、签名前apk名及路径，别名，密码。</p>
<p>&emsp;&emsp;签名完毕后，还可以对生成的apk进行验证。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">jarsigner -verify [out apk name].apk</div></pre></td></tr></table></figure>
<p>&emsp;&emsp;至此，整个工具的重点就介绍完毕了。</p>
<h1 id="工具"><a href="#工具" class="headerlink" title="工具"></a>工具</h1><p>&emsp;&emsp;在很多文章中，有人会推荐使用apktool的工具进行上面的一些工作，这里非常不推荐。apktool是一个java写的工具，在解包和打包过程结束后，会自动关闭当前的命令行。解包打包签名，可能就需要有三个脚本了，给工具的制作造成了很大的不便。</p>
<p>&emsp;&emsp;下面是工具的代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">@echo off</div><div class="line">setlocal enabledelayedexpansion</div><div class="line"></div><div class="line">rem 拖入apk并获取其路径和文件名</div><div class="line">echo 请拖入需要处理的apk</div><div class="line">set /p input=</div><div class="line">set apkUrl=</div><div class="line">for /f &quot;delims=&quot; %%i in (&apos;dir /b %input%&apos;) do (set apkUrl=!apkUrl!%%i)</div><div class="line">set fileName=%apkUrl:.apk=%</div><div class="line"></div><div class="line">rem 解包并删除签名</div><div class="line">if exist output rmdir /s/q output</div><div class="line">md output</div><div class="line">cd output</div><div class="line">md %fileName%</div><div class="line">unzip -o -d %fileName% %input%</div><div class="line">rmdir /s/q %fileName%\META-INF</div><div class="line"></div><div class="line">rem 修改文件打包并签名</div><div class="line">for  do (</div><div class="line">[这里填写修改操作]</div><div class="line">cd !fileName!</div><div class="line">zip -r [your file name].apk ./*</div><div class="line">cd..</div><div class="line">jarsigner -verbose -keystore [keystore path] -signedjar [out apk name].apk [current apk name].apk [alias name] -storepass [password]</div><div class="line">)</div><div class="line"></div><div class="line">pause</div></pre></td></tr></table></figure>
<p>&emsp;&emsp;在这里我使用了for循环获取了解压后的文件夹名的方法，实现起来可能显得会比较扭曲。但是如果在事先不确定拖入文件名，并且打出的包对原文件名有需求的话，就得用这种方法去取了。除此之外，在进行签名的时候，签名前和签名后文件名可以是同一个，这样就不会出现新的apk，而是在原有未签名apk的基础上进行签名。</p>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;概述&quot;&gt;&lt;a href=&quot;#概述&quot; class=&quot;headerlink&quot; title=&quot;概述&quot;&gt;&lt;/a&gt;概述&lt;/h2&gt;&lt;p&gt;&amp;emsp;&amp;emsp;在前一段时间的工作中，我得到了一个新的任务，写一个命令行工具，修改apk中的某个文件，再进行重新打包。这个过程实际上
    
    </summary>
    
    
      <category term="Android" scheme="http://www.z16388.top/tags/Android/"/>
    
      <category term="安卓" scheme="http://www.z16388.top/tags/%E5%AE%89%E5%8D%93/"/>
    
  </entry>
  
  <entry>
    <title>乐理笔记</title>
    <link href="http://www.z16388.top/2018/06/26/music/"/>
    <id>http://www.z16388.top/2018/06/26/music/</id>
    <published>2018-06-26T14:03:05.000Z</published>
    <updated>2018-06-26T14:17:03.528Z</updated>
    
    <content type="html"><![CDATA[<h1 id="基础知识"><a href="#基础知识" class="headerlink" title="基础知识"></a>基础知识</h1><h2 id="调式"><a href="#调式" class="headerlink" title="调式"></a>调式</h2><p>&emsp;&emsp;调式分为升号调与降号调，升号调中的黑键用升号表示，降号调中的黑键用降号表示。</p>
<table>
<thead>
<tr>
<th style="text-align:center">升号调</th>
<th style="text-align:center">降号调</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">G、D、A、E、B、F#、C#</td>
<td style="text-align:center">F、Bb、Eb、Ab、Db、Gb、Cb</td>
</tr>
</tbody>
</table>
<p>&emsp;&emsp;调子中的7个音，下面从左往右，越往右越不稳定：</p>
<table>
<thead>
<tr>
<th style="text-align:center">稳定音</th>
<th style="text-align:center">不稳定音</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1 5 3</td>
<td style="text-align:center">6 2 4 7</td>
</tr>
</tbody>
</table>
<p>&emsp;&emsp;不稳定音总是倾向于稳定音的，他们的倾向分别为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">1←2</div><div class="line">3←4</div><div class="line">5←6</div><div class="line">7→i</div></pre></td></tr></table></figure>
<h2 id="音程"><a href="#音程" class="headerlink" title="音程"></a>音程</h2><p>&emsp;&emsp;音程表</p>
<table>
<thead>
<tr>
<th style="text-align:center">半音数</th>
<th style="text-align:center">音程</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">0</td>
<td style="text-align:center">纯一度</td>
</tr>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">小二度</td>
</tr>
<tr>
<td style="text-align:center">2</td>
<td style="text-align:center">大二度</td>
</tr>
<tr>
<td style="text-align:center">3</td>
<td style="text-align:center">小三度</td>
</tr>
<tr>
<td style="text-align:center">4</td>
<td style="text-align:center">大三度</td>
</tr>
<tr>
<td style="text-align:center">5</td>
<td style="text-align:center">纯四度</td>
</tr>
<tr>
<td style="text-align:center">6</td>
<td style="text-align:center">增四/减五度</td>
</tr>
<tr>
<td style="text-align:center">7</td>
<td style="text-align:center">纯五度</td>
</tr>
<tr>
<td style="text-align:center">8</td>
<td style="text-align:center">小六度</td>
</tr>
<tr>
<td style="text-align:center">9</td>
<td style="text-align:center">大六度</td>
</tr>
<tr>
<td style="text-align:center">10</td>
<td style="text-align:center">小七度</td>
</tr>
<tr>
<td style="text-align:center">11</td>
<td style="text-align:center">大七度</td>
</tr>
<tr>
<td style="text-align:center">12</td>
<td style="text-align:center">纯八度</td>
</tr>
</tbody>
</table>
<p>&emsp;&emsp;</p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;基础知识&quot;&gt;&lt;a href=&quot;#基础知识&quot; class=&quot;headerlink&quot; title=&quot;基础知识&quot;&gt;&lt;/a&gt;基础知识&lt;/h1&gt;&lt;h2 id=&quot;调式&quot;&gt;&lt;a href=&quot;#调式&quot; class=&quot;headerlink&quot; title=&quot;调式&quot;&gt;&lt;/a&gt;调式&lt;/h
    
    </summary>
    
    
      <category term="音乐" scheme="http://www.z16388.top/tags/%E9%9F%B3%E4%B9%90/"/>
    
  </entry>
  
  <entry>
    <title>关于最终幻想14演奏系统的解决方案</title>
    <link href="http://www.z16388.top/2018/06/17/midiff/"/>
    <id>http://www.z16388.top/2018/06/17/midiff/</id>
    <published>2018-06-17T10:16:20.000Z</published>
    <updated>2018-06-18T04:06:03.543Z</updated>
    
    <content type="html"><![CDATA[<h1 id="MIDI键盘映射"><a href="#MIDI键盘映射" class="headerlink" title="MIDI键盘映射"></a>MIDI键盘映射</h1><blockquote>
<p>目前键盘映射不能使用组合键，4.3版本更新之后可使用。</p>
</blockquote>
<h2 id="下载安装"><a href="#下载安装" class="headerlink" title="下载安装"></a>下载安装</h2><p>&emsp;&emsp;最终幻想14更新了4.20版本。在这个版本中，诗人的演奏系统做出了一定的更改，小键盘党的我直接报警了。最后我决定放弃这个“邪门歪道”，直接使用电钢琴进行映射，实现演奏功能。</p>
<p>&emsp;&emsp;在这里，使用到了一个MIDI键盘映射软件：Bome’s Midi Translator。</p>
<blockquote>
<p>官方网站：<a href="https://www.bome.com/products/miditranslator" target="_blank" rel="external">https://www.bome.com/products/miditranslator</a></p>
</blockquote>
<p>&emsp;&emsp;需要注意的是，Pro版本需要59刀的价格。这里，在下载的时候选择精简版。</p>
<h2 id="硬件设备"><a href="#硬件设备" class="headerlink" title="硬件设备"></a>硬件设备</h2><p>&emsp;&emsp;首先介绍一下我所使用的硬件设备。键盘是吟飞的电钢琴，MIDI连接线是淘宝来的便宜货，连输入输出都标反了。在键盘的选择上，并没有太大的要求。因为游戏的演奏功能上只有三个八度。即使是淘宝上买来的手卷钢琴，也是可以使用的。</p>
<h2 id="软件配置"><a href="#软件配置" class="headerlink" title="软件配置"></a>软件配置</h2><p>&emsp;&emsp;在完成软件的安装之后，不能直接打开软件，需要给予管理员权限。</p>
<p>&emsp;&emsp;关于MIDI的输入输出端口，软件的文档有下面的内容：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">Define MIDI Ports</div><div class="line">     Next, specify the MIDI input and output ports you will be using. The MIDI OUT ports will be the ports to which translated MIDI messages are sent to.</div><div class="line"></div><div class="line">    The MIDI IN port will be used as the source of MIDI data, typically connecting with an external MIDI device, e.g. via USB or a MIDI interface on a sound card. Select the appropriate MIDI input source(s) by checking it.</div><div class="line"></div><div class="line">    You can use a virtual MIDI port here if you are setting up a translator for a software sequencer or other audio application that interfaces with MIDI. Check the virtual MIDI port as the output device and then select it as the MIDI input port in your 3rd party application in order to have Bome MIDI Translator control it. Use the alias “Bome Virtual Port 1” (in italics ) instead</div><div class="line">of the direct device.</div></pre></td></tr></table></figure>
<p>&emsp;&emsp;把输入端口设置为你的MIDI设备。需要注意的是，MIDI端口只能有一个应用去占用。像我为了测试MIDI设备是否能够使用，打开了Cubase，软件就提示了无法设置该端口的问题。设置完端口之后，将后面的状态设置为启用。这时候很明显可以看到，左下角输入的端口在闪光。</p>
<p>&emsp;&emsp;之后是输出端口。原文中提到，如果想要使用MIDI映射，就要把输出端口设置为软件提供的一个虚拟端口。如果是Pro版本，需要在设置里，选择选项“Bome Virtual Port 1”即可。除此之外，还要像ASIO声卡一样设置跳线。在这里，将你设备的端口跳到“Bome Virtual Port 1”。跳线设置完之后，会看到输出端口的指示灯也会闪。我们使用的基础班只要将输出端口设置为空即可。</p>
<h2 id="快捷键设置"><a href="#快捷键设置" class="headerlink" title="快捷键设置"></a>快捷键设置</h2><p>&emsp;&emsp;这里的设置分为三步。</p>
<p>&emsp;&emsp;第一步是指定映射名。这里我使用简谱表示唱名，<code>#</code>和字母<code>b</code>分别表示升降调，符号<code>+</code>和<code>-</code>分别表示升降八度。</p>
<p>&emsp;&emsp;第二步是键盘抓取。勾上抓取，然后按MIDI上相应的键，截取。PRO版还有按压时间这一属性，这里忽略掉。</p>
<p>&emsp;&emsp;最后一步是设置映射的按键。</p>
<h1 id="小键盘按键替换"><a href="#小键盘按键替换" class="headerlink" title="小键盘按键替换"></a>小键盘按键替换</h1><p>&emsp;&emsp;在这个版本中，无法将演奏按钮设置为小键盘，这让我这种小键盘党十分头疼。这里使用AutoHotKey脚本，解决这个问题。</p>
<p>&emsp;&emsp;需要注意的是，脚本生成的可执行文件无法兼容win7以上系统。这里要设置兼容性为win7,并给予管理员权限。</p>
<p>&emsp;&emsp;脚本如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">Numpad1::q</div><div class="line">Numpad2::w</div><div class="line">Numpad3::e</div><div class="line">Numpad4::r</div><div class="line">Numpad5::t</div><div class="line">Numpad6::y</div><div class="line">Numpad7::u</div></pre></td></tr></table></figure>
<p>&emsp;&emsp;脚本需要使用AutoHotKey进行编译。下载地址：<a href="https://www.autohotkey.com/" target="_blank" rel="external">https://www.autohotkey.com/</a></p>
<p>&emsp;&emsp;也可以使用我编译好的可执行程序：<a href="https://pan.baidu.com/s/1nmDNgbDi3lcZXMVttSU_Mw" target="_blank" rel="external">https://pan.baidu.com/s/1nmDNgbDi3lcZXMVttSU_Mw</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;MIDI键盘映射&quot;&gt;&lt;a href=&quot;#MIDI键盘映射&quot; class=&quot;headerlink&quot; title=&quot;MIDI键盘映射&quot;&gt;&lt;/a&gt;MIDI键盘映射&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;目前键盘映射不能使用组合键，4.3版本更新之后可使用。&lt;/p&gt;
&lt;
    
    </summary>
    
    
      <category term="MIDI" scheme="http://www.z16388.top/tags/MIDI/"/>
    
      <category term="AutoHotkey" scheme="http://www.z16388.top/tags/AutoHotkey/"/>
    
      <category term="游戏" scheme="http://www.z16388.top/tags/%E6%B8%B8%E6%88%8F/"/>
    
      <category term="音乐" scheme="http://www.z16388.top/tags/%E9%9F%B3%E4%B9%90/"/>
    
  </entry>
  
  <entry>
    <title>系统导引修改</title>
    <link href="http://www.z16388.top/2018/03/13/daoyin/"/>
    <id>http://www.z16388.top/2018/03/13/daoyin/</id>
    <published>2018-03-13T06:11:43.000Z</published>
    <updated>2018-03-13T06:23:24.039Z</updated>
    
    <content type="html"><![CDATA[<p>&emsp;&emsp;寒假的时候给电脑换了个系统，出现了原系统导引没有删除的问题。因为是不同的系统，所以还是比较容易能够分辨的。</p>
<blockquote>
<p>右键“此电脑”-&gt;属性-&gt;高级系统设置-&gt;高级-&gt;启动和故障恢复-&gt;设置-&gt;默认操作系统</p>
</blockquote>
<p>&emsp;&emsp;在这里可以根据需求进行更改，修改多系统选择时间，还是默认进入哪一个。但是Win10的兼容性不是很好，我的外置声卡驱动，还有音频编辑软件都无法正常安装与使用，我便在开学时换回了win8.1。但是问题出现了，两个win8.1难以分辨，而且留着一个没用的导引也十分没有必要。下面就是删除多余导引的方法。（不需要其他软件）</p>
<blockquote>
<p>运行命令提示符（管理员权限）<br>输入命令<code>easybcd</code>查看导引<br>当前的导引会标记为<code>current</code>，并且会有系统盘的路径信息，复制想要删除的导引的标识符，就是用大括号括起来的一长串。<br>执行<code>bcdedit /delete {标识符}</code>完成删除</p>
</blockquote>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&amp;emsp;&amp;emsp;寒假的时候给电脑换了个系统，出现了原系统导引没有删除的问题。因为是不同的系统，所以还是比较容易能够分辨的。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;右键“此电脑”-&amp;gt;属性-&amp;gt;高级系统设置-&amp;gt;高级-&amp;gt;启动和故障恢复-&amp;gt;设置
    
    </summary>
    
    
      <category term="系统" scheme="http://www.z16388.top/tags/%E7%B3%BB%E7%BB%9F/"/>
    
  </entry>
  
  <entry>
    <title>【ACM教程】2.6 文件操作</title>
    <link href="http://www.z16388.top/2018/03/06/%E3%80%90ACM%E6%95%99%E7%A8%8B%E3%80%912-6%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/"/>
    <id>http://www.z16388.top/2018/03/06/【ACM教程】2-6文件操作/</id>
    <published>2018-03-06T05:57:13.000Z</published>
    <updated>2018-03-13T08:47:12.521Z</updated>
    
    <content type="html"><![CDATA[<h1 id="第六节-文件操作"><a href="#第六节-文件操作" class="headerlink" title="第六节 文件操作"></a>第六节 文件操作</h1><p>&emsp;&emsp;在算法类竞赛的过程中，还需要我们掌握文件操作。</p>
<p>&emsp;&emsp;在去年的蓝桥杯省赛中，第一道题需要处理大量的数据。如果每次都要进行大量的数据输入操作，会花费很多时间。这个时候，把数据存放到文本文档中去，再使用文件操作读取数据，进行计算，能够节省大量的时间。</p>
<p>&emsp;&emsp;除此之外，在调试程序时，也可以将测试数据保存在文件中读取，可以省去每次编译时，数据输入的时间。</p>
<p>&emsp;&emsp;C语言使用文件指针来进行文件的读写。</p>
<p>&emsp;&emsp;首先是创建文件指针：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">FILE *fin;</div></pre></td></tr></table></figure>
<p>&emsp;&emsp;这里的FILE一定要大写，用于存放文件的变量一定是指针类型。</p>
<p>&emsp;&emsp;接下来要对文件指针初始化：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">fin = fopen(<span class="string">"xx.txt"</span>,<span class="string">"w"</span>);</div></pre></td></tr></table></figure>
<p>&emsp;&emsp;这里的fopen()函数拥有两个参数，一个是用于读写的用户名，另一个就是读写的参数，这个参数由以下几种字母组成：</p>
<blockquote>
<p>r(read): 只读<br>w(write): 只写<br>a(append): 追加<br>t(text): 文本文件，可省略不写<br>b(binary): 二进制文件<br>+: 读和写</p>
</blockquote>
<p>&emsp;&emsp;我们通常使用w创建输出和输出两个文档，然后将输入文档改为r即可。</p>
<p>&emsp;&emsp;下面是一个简单的A+B问题的文件操作实现：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    FILE *fin,*fout;</div><div class="line">    <span class="keyword">int</span> a,b,res;</div><div class="line">    fin = fopen(<span class="string">"in.txt"</span>,<span class="string">"r"</span>);</div><div class="line">    fout = fopen(<span class="string">"out.txt"</span>,<span class="string">"w"</span>);</div><div class="line">    <span class="built_in">fscanf</span>(fin,<span class="string">"%d %d"</span>,&amp;a,&amp;b);</div><div class="line">    res = a+b;</div><div class="line">    <span class="built_in">fprintf</span>(fout,<span class="string">"%d\n"</span>,res);</div><div class="line">    fclose(fin);</div><div class="line">    fclose(fout);</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;第六节-文件操作&quot;&gt;&lt;a href=&quot;#第六节-文件操作&quot; class=&quot;headerlink&quot; title=&quot;第六节 文件操作&quot;&gt;&lt;/a&gt;第六节 文件操作&lt;/h1&gt;&lt;p&gt;&amp;emsp;&amp;emsp;在算法类竞赛的过程中，还需要我们掌握文件操作。&lt;/p&gt;
&lt;p&gt;&amp;em
    
    </summary>
    
    
      <category term="ACM" scheme="http://www.z16388.top/tags/ACM/"/>
    
      <category term="算法" scheme="http://www.z16388.top/tags/%E7%AE%97%E6%B3%95/"/>
    
      <category term="ACM教程" scheme="http://www.z16388.top/tags/ACM%E6%95%99%E7%A8%8B/"/>
    
      <category term="动态规划" scheme="http://www.z16388.top/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/"/>
    
  </entry>
  
  <entry>
    <title>Lua学习笔记</title>
    <link href="http://www.z16388.top/2018/02/25/Luanote/"/>
    <id>http://www.z16388.top/2018/02/25/Luanote/</id>
    <published>2018-02-25T03:32:12.000Z</published>
    <updated>2018-03-15T09:22:34.303Z</updated>
    
    <content type="html"><![CDATA[<p>&emsp;&emsp;学习资料地址：<a href="http://www.runoob.com/lua/lua-tutorial.html" target="_blank" rel="external">http://www.runoob.com/lua/lua-tutorial.html</a></p>
<h1 id="环境安装与使用"><a href="#环境安装与使用" class="headerlink" title="环境安装与使用"></a>环境安装与使用</h1><h2 id="安装环境"><a href="#安装环境" class="headerlink" title="安装环境"></a>安装环境</h2><p>&emsp;&emsp;在Windows环境下，使用SciTE来运行Lua程序。</p>
<p>&emsp;&emsp;项目GitHub地址：<a href="https://github.com/rjpcomputing/luaforwindows/releases" target="_blank" rel="external">https://github.com/rjpcomputing/luaforwindows/releases</a></p>
<p>&emsp;&emsp;上面的官方下载无法保证下载速度，我使用的是菜鸟教程分流的下载地址：<a href="http://static.runoob.com/download/LuaForWindows_v5.1.4-46.exe" target="_blank" rel="external">http://static.runoob.com/download/LuaForWindows_v5.1.4-46.exe</a></p>
<h2 id="开始编程"><a href="#开始编程" class="headerlink" title="开始编程"></a>开始编程</h2><p>&emsp;&emsp;和Python一样，Lua也有交互式的编程方式。在命令行中输入<code>lua</code>或者<code>lua -i</code>启用。</p>
<p>&emsp;&emsp;同时也可以使用脚本式编程，就是将代码存放在一个lua文件中，命令行执行<code>lua xxx.lua</code>即可。</p>
<p>&emsp;&emsp;需要注意的是，交互式编程状态下不能使用lua命令，会出现下面的错误，这一点我也是犯了好多次：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">stdin:1: &apos;=&apos; expected near &apos;hello&apos;</div></pre></td></tr></table></figure>
<p>&emsp;&emsp;教程中没有提到怎样退出lua环境 。<code>os.exit()</code>退出。</p>
<h1 id="基础知识"><a href="#基础知识" class="headerlink" title="基础知识"></a>基础知识</h1><h2 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h2><p>&emsp;&emsp;单行注释:</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="comment">--</span></div></pre></td></tr></table></figure>
<p>&emsp;&emsp;多行注释：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">--[[</span></div><div class="line">XXX</div><div class="line">XXX</div><div class="line">]]<span class="comment">--</span></div></pre></td></tr></table></figure>
<h2 id="输入输出"><a href="#输入输出" class="headerlink" title="输入输出"></a>输入输出</h2><figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">print</span>(<span class="string">"hello world!"</span>)</div></pre></td></tr></table></figure>
<h1 id="数据类型与变量"><a href="#数据类型与变量" class="headerlink" title="数据类型与变量"></a>数据类型与变量</h1><h2 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h2><h3 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h3><p>&emsp;&emsp;Lua有三种变量类型：全局变量，局部变量和表中的域。默认情况下，变量都是全局变量，函数里面没有做特殊声明的变量也都是全局变量。全局变量不需要声明，直接赋值即创建了这个全局变量。如果访问了一个没有创建的变量，会返回一个nil。同样，如果想要删除一个变量，直接赋值nil即可。</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&gt; <span class="built_in">print</span>(b)</div><div class="line"><span class="keyword">nil</span></div><div class="line">&gt; b=<span class="number">10</span></div><div class="line">&gt; <span class="built_in">print</span>(b)</div><div class="line"><span class="number">10</span></div></pre></td></tr></table></figure>
<p>&emsp;&emsp;如果想要一个局部变量，需要使用<code>local</code>显式声明：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">local</span> b = <span class="number">5</span></div></pre></td></tr></table></figure>
<h3 id="赋值语句"><a href="#赋值语句" class="headerlink" title="赋值语句"></a>赋值语句</h3><p>&emsp;&emsp;赋值时改变一个变量的值和改变表域的最基本方法。同大多数编程语言类似，Lua使用从右到左的赋值方式。除此之外，还能够实现多个变量同时赋值：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">a, b = <span class="number">10</span>, <span class="number">2</span>*x</div></pre></td></tr></table></figure>
<p>&emsp;&emsp;上面的语句在功能上，等同于：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">a = <span class="number">10</span></div><div class="line">b = <span class="number">2</span>*x</div></pre></td></tr></table></figure>
<p>&emsp;&emsp;在对多个变量进行赋值时，Lua采用的计算方式是<strong>先计算右侧的值，再进行赋值</strong>的操作。所以再Lua中，实现两个变量值的交换只需要一行代码：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">x, y = y, x</div></pre></td></tr></table></figure>
<p>&emsp;&emsp;除此之外，当变量的个数和数值的个数不一致时，Lua会遵循这个策略：</p>
<ol>
<li>当 变量个数 &gt; 值的个数 时，右侧没有指定值的变量赋值为nil</li>
<li>当 变量个数 &lt; 值的个数 时，右侧多余的值会被忽略掉。</li>
</ol>
<p>&emsp;&emsp;所以比较容易出现的错误是，在对多个变量进行相同赋值时：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">a, b, c = <span class="number">0</span></div><div class="line"><span class="built_in">print</span>(a,b,c)             <span class="comment">--&gt; 0   nil   nil</span></div><div class="line">a, b, c = <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span></div><div class="line"><span class="built_in">print</span>(a,b,c)             <span class="comment">--&gt; 0   0   0</span></div></pre></td></tr></table></figure>
<p>&emsp;&emsp;多赋值语句，除了用在上面的值交换的过程中之外，还常用于记录函数的多个返回值。Lua中，函数可以有多个返回值。如果想要将函数<code>f()</code>的两个返回值存放到全局变量<code>a</code>和<code>b</code>中去，可以使用下面的语句：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">a, b = f()</div></pre></td></tr></table></figure>
<p>&emsp;&emsp;上面的语句，实现了将函数的第一个返回值给a，第二个给b。</p>
<p>&emsp;&emsp;虽然Lua定义全局变量比较方便，但是应当尽可能地使用局部变量。因为局部变量的访问时间要比全局变量更快，同时也避免了变量命名的冲突。</p>
<h2 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h2><h3 id="概述-1"><a href="#概述-1" class="headerlink" title="概述"></a>概述</h3><p>&emsp;&emsp;以下是常见的集中变量类型。</p>
<table>
<thead>
<tr>
<th style="text-align:center">数据类型</th>
<th style="text-align:center">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">nil</td>
<td style="text-align:center">无效值，没有赋值的变量都会返回nil</td>
</tr>
<tr>
<td style="text-align:center">boolean</td>
<td style="text-align:center">布尔</td>
</tr>
<tr>
<td style="text-align:center">number</td>
<td style="text-align:center">双精度浮点型</td>
</tr>
<tr>
<td style="text-align:center">string</td>
<td style="text-align:center">字符串，用单引号或双引号括起来</td>
</tr>
<tr>
<td style="text-align:center">function</td>
<td style="text-align:center">由C或Lua编写的函数</td>
</tr>
<tr>
<td style="text-align:center">userdata</td>
<td style="text-align:center">*表示任意存储在变量中的C数据结构</td>
</tr>
<tr>
<td style="text-align:center">thread</td>
<td style="text-align:center">*表示执行的独立线路，用于执行协同程序</td>
</tr>
<tr>
<td style="text-align:center">table</td>
<td style="text-align:center">*Lua 中的表（table）其实是一个”关联数组”（associative arrays），数组的索引可以是数字或者是字符串。在 Lua 里，table 的创建是通过”构造表达式”来完成，最简单构造表达式是{}，用来创建一个空表。</td>
</tr>
</tbody>
</table>
<p>&emsp;&emsp;可以使用type函数测试给定变量或常量的类型：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(<span class="string">"Hello world"</span>))      <span class="comment">--&gt; string</span></div><div class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(<span class="number">10.4</span>*<span class="number">3</span>))             <span class="comment">--&gt; number</span></div><div class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(<span class="built_in">print</span>))              <span class="comment">--&gt; function</span></div><div class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(<span class="built_in">type</span>))               <span class="comment">--&gt; function</span></div><div class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(<span class="keyword">true</span>))               <span class="comment">--&gt; boolean</span></div><div class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(<span class="keyword">nil</span>))                <span class="comment">--&gt; nil</span></div><div class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(<span class="built_in">type</span>(X)))            <span class="comment">--&gt; string</span></div></pre></td></tr></table></figure>
<h3 id="nil（空）"><a href="#nil（空）" class="headerlink" title="nil（空）"></a>nil（空）</h3><p>&emsp;&emsp;nil类型表示没有任何有效值，只有一个值，nil。打印一个没有赋值的变量会输出nil。对于全局变量和table变量，nil可以起到删除的作用。全局变量或者 table表里的变量赋一个nil值，等同于将他们删除。</p>
<p>&emsp;&emsp;nil在比较时，需要使用双引号括起来。</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&gt; <span class="built_in">type</span>(X)</div><div class="line"><span class="keyword">nil</span></div><div class="line">&gt; <span class="built_in">type</span>(X)==<span class="keyword">nil</span></div><div class="line"><span class="keyword">false</span></div><div class="line">&gt; <span class="built_in">type</span>(X)==<span class="string">"nil"</span></div><div class="line"><span class="keyword">true</span></div><div class="line">&gt;</div></pre></td></tr></table></figure>
<h3 id="boolean（布尔）"><a href="#boolean（布尔）" class="headerlink" title="boolean（布尔）"></a>boolean（布尔）</h3><p>&emsp;&emsp;Lua的布尔值与其他语言有一个显著的区别，它将false和nil看作假，其他的值，<strong>包括0，都为真</strong>。长时间使用其他编程语言的人可能会很难反应过来。</p>
<p>&emsp;&emsp;除此之外，在进行逻辑判断时也和其他语言有很多不同。进行或、与运算时，如0 or false的值就为0，10 and 20返回值就为20。</p>
<h3 id="number（数字）"><a href="#number（数字）" class="headerlink" title="number（数字）"></a>number（数字）</h3><p>&emsp;&emsp;Lua默认只有一种number类型，即双精度浮点型。</p>
<h3 id="string（字符串）"><a href="#string（字符串）" class="headerlink" title="string（字符串）"></a>string（字符串）</h3><p>&emsp;&emsp;字符串由一对单引号或者双引号括起来。</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">string1 = <span class="string">"this is string1"</span></div></pre></td></tr></table></figure>
<p>&emsp;&emsp;也可以使用两个方括号<code>[[]]</code>来表示一块字符串。</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">html = <span class="string">[[</span></div><div class="line">&lt;html&gt;</div><div class="line">&lt;head&gt;&lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line">    &lt;a href="http://www.z16388.com/"&gt;崎径 其镜&lt;/a&gt;</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div><div class="line">]]</div></pre></td></tr></table></figure>
<p>&emsp;&emsp;运行时，Lua会自动在string和number之间进行格式转换。</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">print</span>(<span class="string">"10"</span>+ <span class="number">1</span>)     <span class="comment">--&gt; 11</span></div><div class="line"><span class="built_in">print</span>(<span class="string">"10 + 1"</span>)  <span class="comment">--&gt; 10 + 1</span></div><div class="line"><span class="built_in">print</span>(<span class="string">"hello"</span>+ <span class="number">1</span>)    <span class="comment">-- 报错 (无法转换 "hello")</span></div><div class="line"><span class="built_in">print</span>(<span class="number">10</span> .. <span class="number">20</span>) <span class="comment">--&gt; 1020</span></div></pre></td></tr></table></figure>
<p>&emsp;&emsp;在一个数字后写<code>..</code>时应该<strong>加空格，防止被错误解释</strong>。</p>
<p>&emsp;&emsp;可以使用两点<code>..</code>来连接两个字符串：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&gt; <span class="built_in">print</span>(<span class="string">"a"</span> .. <span class="string">'b'</span>)</div><div class="line">ab</div><div class="line">&gt; <span class="built_in">print</span>(<span class="number">157</span> .. <span class="number">428</span>)</div><div class="line"><span class="number">157428</span></div></pre></td></tr></table></figure>
<p>&emsp;&emsp;可以使用<code>#</code>来计算字符串的长度：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&gt; len = <span class="string">"www.z16388.top"</span></div><div class="line">&gt; <span class="built_in">print</span>(#len)</div><div class="line"><span class="number">14</span></div><div class="line">&gt; <span class="built_in">print</span>(#<span class="string">"www.z16388.top"</span>)</div><div class="line"><span class="number">14</span></div></pre></td></tr></table></figure>
<h3 id="table（表）"><a href="#table（表）" class="headerlink" title="table（表）"></a>table（表）</h3><p>&emsp;&emsp;表是一个关联数组，可以创建空表，也可以在创建的时候初始化：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">local</span> tbl1 = &#123;&#125;</div><div class="line"><span class="keyword">local</span> tbl2 = &#123;<span class="string">"apple"</span>, <span class="string">"pear"</span>, <span class="string">"orange"</span>, <span class="string">"grape"</span>&#125;</div></pre></td></tr></table></figure>
<p>&emsp;&emsp;数组的索引可以是数字或者字符串：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">a[key] = <span class="number">22</span></div><div class="line">a[<span class="number">2</span>] = <span class="number">11</span></div></pre></td></tr></table></figure>
<p>&emsp;&emsp;需要注意的是，与其他语言不同，<strong>Lua默认初始索引是从1开始的！！！！</strong></p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">local</span> tbl = &#123;<span class="string">"apple"</span>, <span class="string">"pear"</span>, <span class="string">"orange"</span>, <span class="string">"grape"</span>&#125;</div><div class="line"><span class="keyword">for</span> key, val <span class="keyword">in</span> <span class="built_in">pairs</span>(tbl) <span class="keyword">do</span></div><div class="line">    <span class="built_in">print</span>(<span class="string">"Key"</span>, key)</div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>&emsp;&emsp;程序的运行结果是：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Key    <span class="number">1</span></div><div class="line">Key    <span class="number">2</span></div><div class="line">Key    <span class="number">3</span></div><div class="line">Key    <span class="number">4</span></div></pre></td></tr></table></figure>
<p>&emsp;&emsp;对table的索引除了使用国际惯例<code>[]</code>之外，还可以使用<code>.</code>进行操作。需要注意的是，<strong>使用点号来索引时，索引的关键字不能为数字</strong>。</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&gt; site = &#123;&#125;</div><div class="line">&gt; site[<span class="string">"key"</span>] = <span class="string">"www.z16388.top"</span></div><div class="line">&gt; <span class="built_in">print</span>(site[<span class="string">"key"</span>])</div><div class="line">www.z16388.top</div><div class="line">&gt; <span class="built_in">print</span>(site.key)</div><div class="line">www.z16388.top</div></pre></td></tr></table></figure>
<p>&emsp;&emsp;最后，table不会固定长度,没有被赋值的部分，返回值都为nil。如果直接使用for循环进行遍历，循环会在遇到nil值时终止，可能无法实现对整个数组的遍历。（如果其中有空值的话）具体的解决方法在table部分给出。</p>
<h3 id="function（函数）"><a href="#function（函数）" class="headerlink" title="function（函数）"></a>function（函数）</h3><p>&emsp;&emsp;在Lua中，函数被看作第一类值，函数可以存在变量里。</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">factorial1</span><span class="params">(n)</span></span></div><div class="line">    <span class="keyword">if</span> n == <span class="number">0</span> <span class="keyword">then</span></div><div class="line">        <span class="keyword">return</span> <span class="number">1</span></div><div class="line">    <span class="keyword">else</span></div><div class="line">        <span class="keyword">return</span> n * factorial1(n - <span class="number">1</span>)</div><div class="line">    <span class="keyword">end</span></div><div class="line"><span class="keyword">end</span></div><div class="line"><span class="built_in">print</span>(factorial1(<span class="number">5</span>))</div><div class="line">factorial2 = factorial1</div><div class="line"><span class="built_in">print</span>(factorial2(<span class="number">5</span>))</div></pre></td></tr></table></figure>
<p>&emsp;&emsp;可以以匿名函数的方式，通过参数传递。函数之所以有名字，就是为了方便进行调用。而只使用一次的函数，则可以不起名字，也就是匿名函数。</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">testFun</span><span class="params">(tab,fun)</span></span></div><div class="line">    <span class="keyword">for</span> k ,v <span class="keyword">in</span> <span class="built_in">pairs</span>(tab) <span class="keyword">do</span></div><div class="line">        <span class="built_in">print</span>(fun(k,v));</div><div class="line">    <span class="keyword">end</span></div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"></div><div class="line">tab=&#123;key1=<span class="string">"val1"</span>,key2=<span class="string">"val2"</span>&#125;</div><div class="line">testFun(tab,</div><div class="line"><span class="function"><span class="keyword">function</span><span class="params">(key,val)</span></span><span class="comment">--匿名函数</span></div><div class="line">    <span class="keyword">return</span> key..<span class="string">"="</span>..val</div><div class="line"><span class="keyword">end</span></div><div class="line">);</div></pre></td></tr></table></figure>
<h1 id="循环与流程控制"><a href="#循环与流程控制" class="headerlink" title="循环与流程控制"></a>循环与流程控制</h1><h2 id="循环语句"><a href="#循环语句" class="headerlink" title="循环语句"></a>循环语句</h2><h3 id="while循环"><a href="#while循环" class="headerlink" title="while循环"></a>while循环</h3><p>&emsp;&emsp;条件为<code>true</code>时会重复执行循环体的语句。</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">while</span>(condition)</div><div class="line"><span class="keyword">do</span></div><div class="line">   statements</div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<h3 id="for循环"><a href="#for循环" class="headerlink" title="for循环"></a>for循环</h3><p>&emsp;&emsp;for循环是可以制定循环体执行次数的循环语句。Lua中的for循环需要相当地注意，分为两大类：</p>
<h4 id="数值for循环"><a href="#数值for循环" class="headerlink" title="数值for循环"></a>数值for循环</h4><figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> var=exp1,exp2,exp3 <span class="keyword">do</span>  </div><div class="line">    &lt;执行体&gt;  </div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>&emsp;&emsp;<code>exp1</code>为初值，<code>exp2</code>为终值，<code>exp3</code>为步长。若<code>exp3</code>不指定，值默认为1。需要注意的是，表达式中<strong>三个参数的值都会在循环开始前一次性求值，以后不再进行求值</strong>。</p>
<p>&emsp;&emsp;参数</p>
<h4 id="泛型for循环"><a href="#泛型for循环" class="headerlink" title="泛型for循环"></a>泛型for循环</h4><p>&emsp;&emsp;泛型for循环，通过一个迭代器来遍历所有的值，与C++类似。</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> i,v <span class="keyword">in</span> <span class="built_in">ipairs</span>(a) </div><div class="line">    <span class="keyword">do</span> <span class="built_in">print</span>(v) </div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>&emsp;&emsp;其中，<code>i</code>是索引，<code>v</code>是索引对应的元素的值，ipairs是Lua提供的一个迭代器函数，用来迭代数组。它的参数<code>a</code>就是数组名。下面是一个对数组进行泛型for循环输出的例子。</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">days = &#123;<span class="string">"Suanday"</span>,<span class="string">"Monday"</span>,<span class="string">"Tuesday"</span>,<span class="string">"Wednesday"</span>,<span class="string">"Thursday"</span>,<span class="string">"Friday"</span>,<span class="string">"Saturday"</span>&#125;  </div><div class="line"><span class="keyword">for</span> i,v <span class="keyword">in</span> <span class="built_in">ipairs</span>(days) <span class="keyword">do</span>  </div><div class="line">    <span class="built_in">print</span>(v) </div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<h3 id="repeat-…-until循环"><a href="#repeat-…-until循环" class="headerlink" title="repeat … until循环"></a>repeat … until循环</h3><p>&emsp;&emsp;即do … while，重复执行循环体到循环条件为真时。</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">repeat</span></div><div class="line">   statements</div><div class="line"><span class="keyword">until</span>( condition )</div></pre></td></tr></table></figure>
<h3 id="break语句"><a href="#break语句" class="headerlink" title="break语句"></a>break语句</h3><p>&emsp;&emsp;Lua支持break语句。</p>
<h2 id="流程控制"><a href="#流程控制" class="headerlink" title="流程控制"></a>流程控制</h2><p>&emsp;&emsp;if语句的格式：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span>(布尔表达式)</div><div class="line"><span class="keyword">then</span></div><div class="line">   <span class="comment">--[ 在布尔表达式为 true 时执行的语句 --]</span></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>&emsp;&emsp;if … else 语句格式：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span>(布尔表达式)</div><div class="line"><span class="keyword">then</span></div><div class="line">   <span class="comment">--[ 布尔表达式为 true 时执行该语句块 --]</span></div><div class="line"><span class="keyword">else</span></div><div class="line">   <span class="comment">--[ 布尔表达式为 false 时执行该语句块 --]</span></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>&emsp;&emsp;需要注意的是，Lua中<strong>0也为真值</strong>，只有false和nil为假。</p>
<h1 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h1><h2 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h2><p>&emsp;&emsp;Lua中，函数的标准格式如下：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">optional_function_scope <span class="function"><span class="keyword">function</span> <span class="title">function_name</span><span class="params">( argument1, argument2, argument3..., argumentn)</span></span></div><div class="line">    function_body</div><div class="line">    <span class="keyword">return</span> result_params_comma_separated</div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<blockquote>
<ol>
<li><code>optional_function_scope</code>这个参数是可选的，表示函数是全局的还是局部的。默认为全局函数，设置为局部函数需要加关键字local</li>
<li><code>function_name</code>函数名</li>
<li><code>argument</code>函数的参数，用逗号隔开，也可以不带参数</li>
<li><code>function_body</code>函数体</li>
<li><code>result_params_comma_separated</code>返回值，可以有多个。</li>
</ol>
</blockquote>
<p>&emsp;&emsp;<strong>函数可以作为参数</strong>。</p>
<h2 id="多返回值"><a href="#多返回值" class="headerlink" title="多返回值"></a>多返回值</h2><p>&emsp;&emsp;Lua中的函数可以有多个返回值。</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">return</span> res1,res2;</div></pre></td></tr></table></figure>
<h2 id="可变参数"><a href="#可变参数" class="headerlink" title="可变参数"></a>可变参数</h2><p>&emsp;&emsp;Lua中的函数可以接受可变数目的参数，用三点<code>…</code>来代表多个参数。计算平均值的程序，可以这样写：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">average</span><span class="params">(...)</span></span></div><div class="line">   result = <span class="number">0</span></div><div class="line">   <span class="keyword">local</span> arg=&#123;...&#125;</div><div class="line">   <span class="keyword">for</span> i,v <span class="keyword">in</span> <span class="built_in">ipairs</span>(arg) <span class="keyword">do</span></div><div class="line">      result = result + v</div><div class="line">   <span class="keyword">end</span></div><div class="line">   <span class="built_in">print</span>(<span class="string">"总共传入 "</span> .. #arg .. <span class="string">" 个数"</span>)</div><div class="line">   <span class="keyword">return</span> result/#arg</div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="built_in">print</span>(<span class="string">"平均值为"</span>,average(<span class="number">10</span>,<span class="number">5</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>))</div></pre></td></tr></table></figure>
<p>&emsp;&emsp;在新的版本里，<code>#</code>不能用于返回数组元素的个数了，而是需要使用：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">select</span>(<span class="string">"#"</span>,...)</div></pre></td></tr></table></figure>
<h1 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h1><h2 id="算数运算符"><a href="#算数运算符" class="headerlink" title="算数运算符"></a>算数运算符</h2><p>&emsp;&emsp;常用的算术运算符与其他语言类似。需要注意的是，Lua里没有整数，所以如果想要取整操作，必须要进行取整操作：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">x = <span class="built_in">math</span>.ceil(x)</div></pre></td></tr></table></figure>
<p>&emsp;&emsp;需要注意的是，这里的取整仍然是向上取整。也就是说，无论小数部分有多小，取整的结果都是要比原数的整数部分大1。</p>
<p>&emsp;&emsp;除此之外，常用的操作应该还有数据精度的控制：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">string</span>.format(<span class="string">"%.2f"</span>,dt)</div></pre></td></tr></table></figure>
<h2 id="关系运算符"><a href="#关系运算符" class="headerlink" title="关系运算符"></a>关系运算符</h2><table>
<thead>
<tr>
<th style="text-align:center">符号</th>
<th style="text-align:center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">==</td>
<td style="text-align:center">等于</td>
</tr>
<tr>
<td style="text-align:center">~=</td>
<td style="text-align:center">不等</td>
</tr>
<tr>
<td style="text-align:center">&gt;=</td>
<td style="text-align:center">大于等于</td>
</tr>
<tr>
<td style="text-align:center">&lt;=</td>
<td style="text-align:center">小于等于</td>
</tr>
<tr>
<td style="text-align:center">&gt;</td>
<td style="text-align:center">大于</td>
</tr>
<tr>
<td style="text-align:center">&lt;</td>
<td style="text-align:center">小于</td>
</tr>
</tbody>
</table>
<h2 id="逻辑运算符"><a href="#逻辑运算符" class="headerlink" title="逻辑运算符"></a>逻辑运算符</h2><table>
<thead>
<tr>
<th style="text-align:center">符号</th>
<th style="text-align:center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">and</td>
<td style="text-align:center">与</td>
</tr>
<tr>
<td style="text-align:center">or</td>
<td style="text-align:center">或</td>
</tr>
<tr>
<td style="text-align:center">not</td>
<td style="text-align:center">非</td>
</tr>
</tbody>
</table>
<h2 id="其他运算符"><a href="#其他运算符" class="headerlink" title="其他运算符"></a>其他运算符</h2><table>
<thead>
<tr>
<th style="text-align:center">符号</th>
<th style="text-align:center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">..</td>
<td style="text-align:center">连结两个字符串</td>
</tr>
<tr>
<td style="text-align:center">#</td>
<td style="text-align:center">返回字符串或表的长度</td>
</tr>
</tbody>
</table>
<p>&emsp;&emsp;<code>#</code>运算符，获取的表的长度实际上获取的是表最大的索引值。</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">tab1 = &#123;<span class="string">"1"</span>,<span class="string">"2"</span>&#125;</div><div class="line"><span class="built_in">print</span>(<span class="string">"tab1长度"</span>..#tab1)</div><div class="line">tab2 = &#123;key1=<span class="string">"1"</span>,<span class="string">"2"</span>&#125;</div><div class="line"><span class="built_in">print</span>(<span class="string">"tab2长度"</span>..#tab2)</div><div class="line">tab3 = &#123;&#125;</div><div class="line">tab3[<span class="number">1</span>]=<span class="string">"1"</span></div><div class="line">tab3[<span class="number">2</span>]=<span class="string">"2"</span></div><div class="line">tab3[<span class="number">4</span>]=<span class="string">"4"</span></div><div class="line"><span class="built_in">print</span>(<span class="string">"tab3长度"</span>..#tab3)</div><div class="line"></div><div class="line">tab1长度<span class="number">2</span></div><div class="line">tab2长度<span class="number">1</span></div><div class="line">tab3长度<span class="number">4</span></div></pre></td></tr></table></figure>
<p>&emsp;&emsp;但是当下表的值，<strong>大小相差超过1的时候，就会停止计算</strong>。</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">tab3=&#123;&#125;</div><div class="line">tab3[<span class="number">1</span>]=<span class="string">"1"</span></div><div class="line">tab3[<span class="number">2</span>]=<span class="string">"2"</span></div><div class="line">tab3[<span class="number">5</span>]=<span class="string">"5"</span></div><div class="line"><span class="built_in">print</span>(<span class="string">"tab3的长度"</span>,#tab3)</div><div class="line"></div><div class="line">tab3的长度    <span class="number">2</span></div></pre></td></tr></table></figure>
<h2 id="运算符优先级"><a href="#运算符优先级" class="headerlink" title="运算符优先级"></a>运算符优先级</h2><p>&emsp;&emsp;在原口诀的基础上，字符串连接运算符的优先级在算数运算符和关系运算符之间。</p>
<h1 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h1><h2 id="形式"><a href="#形式" class="headerlink" title="形式"></a>形式</h2><p>&emsp;&emsp;共有三种类型</p>
<ol>
<li>单引号括起来</li>
<li>双引号括起来</li>
<li><code>[[]]</code>括起来</li>
</ol>
<h2 id="常用方法"><a href="#常用方法" class="headerlink" title="常用方法"></a>常用方法</h2><table>
<thead>
<tr>
<th style="text-align:center">方法</th>
<th style="text-align:center">用途</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">uper(str)</td>
<td style="text-align:center">全部转为大写字母</td>
</tr>
<tr>
<td style="text-align:center">lower(str)</td>
<td style="text-align:center">全部转为小写字母</td>
</tr>
<tr>
<td style="text-align:center">len(str)</td>
<td style="text-align:center">计算长度</td>
</tr>
<tr>
<td style="text-align:center">gsub(str,str1,str2,num)</td>
<td style="text-align:center">将str中的str1，替换为str2，替换num个，num可以省略</td>
</tr>
<tr>
<td style="text-align:center">find(str,str1,[init, [end]])</td>
<td style="text-align:center">在str中搜索str1，返回其位置。如果不存在返回nil。第三个参数为索引</td>
</tr>
</tbody>
</table>
<p>&emsp;&emsp;字符串翻转</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt; <span class="built_in">string</span>.reverse(<span class="string">"Lua"</span>)</div><div class="line">auL</div></pre></td></tr></table></figure>
<p>&emsp;&emsp;字符串格式化，和C的输出类似</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt; <span class="built_in">string</span>.format(<span class="string">"the value is:%d"</span>,<span class="number">4</span>)</div><div class="line">the value is:<span class="number">4</span></div></pre></td></tr></table></figure>
<p>&emsp;&emsp;<code>char()</code>函数，将整数按照ASCII码转换成对应的符号；<code>byte(str,num)</code>将第num个字幕转换为ASCII码，默认是第一个。</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&gt; <span class="built_in">string</span>.char(<span class="number">97</span>,<span class="number">98</span>,<span class="number">99</span>,<span class="number">100</span>)</div><div class="line">abcd</div><div class="line">&gt; <span class="built_in">string</span>.byte(<span class="string">"ABCD"</span>,<span class="number">4</span>)</div><div class="line"><span class="number">68</span></div><div class="line">&gt; <span class="built_in">string</span>.byte(<span class="string">"ABCD"</span>)</div><div class="line"><span class="number">65</span></div></pre></td></tr></table></figure>
<p>&emsp;&emsp;<code>rep(string,n)</code>将字符串复制n次。</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt; <span class="built_in">string</span>.rep(<span class="string">"abcd"</span>,<span class="number">2</span>)</div><div class="line">abcdabcd</div></pre></td></tr></table></figure>
<p>&emsp;&emsp;<code>..</code>可以用于连接字符串：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt; <span class="built_in">print</span>(<span class="string">"FF"</span>..<span class="string">"14"</span>)</div><div class="line">FF14</div></pre></td></tr></table></figure>
<p>&emsp;&emsp;原课程笔记中提到了两个比较有用的程序。一个是将阿拉伯数字转换成大写的中文数字，另一个是移除一个字符串中的汉字字符和符号。</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">NumToCN</span><span class="params">(num)</span></span></div><div class="line">    <span class="keyword">local</span> size = #<span class="built_in">tostring</span>(num)</div><div class="line">    <span class="keyword">local</span> CN = <span class="string">""</span></div><div class="line">    <span class="keyword">local</span> StrCN = &#123;<span class="string">"一"</span>,<span class="string">"二"</span>,<span class="string">"三"</span>,<span class="string">"四"</span>,<span class="string">"五"</span>,<span class="string">"六"</span>,<span class="string">"七"</span>,<span class="string">"八"</span>,<span class="string">"九"</span>&#125;</div><div class="line">    <span class="keyword">for</span> i = <span class="number">1</span> , size <span class="keyword">do</span></div><div class="line">        CN = CN .. StrCN[<span class="built_in">tonumber</span>(<span class="built_in">string</span>.sub(<span class="built_in">tostring</span>(num), i , i))]</div><div class="line">    <span class="keyword">end</span></div><div class="line">    <span class="keyword">return</span> CN</div><div class="line"><span class="keyword">end</span></div><div class="line"><span class="built_in">print</span>(NumToCN(<span class="number">56665</span>))</div></pre></td></tr></table></figure>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">StrSplit</span><span class="params">(inputstr, sep)</span></span></div><div class="line">    <span class="keyword">if</span> sep == <span class="keyword">nil</span> <span class="keyword">then</span></div><div class="line">      sep = <span class="string">"%s"</span></div><div class="line">    <span class="keyword">end</span></div><div class="line">    <span class="keyword">local</span> t=&#123;&#125;</div><div class="line">    <span class="keyword">local</span> i=<span class="number">1</span></div><div class="line">    <span class="keyword">for</span> str <span class="keyword">in</span> <span class="built_in">string</span>.gmatch(inputstr, <span class="string">"([^"</span>..sep..<span class="string">"]+)"</span>) <span class="keyword">do</span></div><div class="line">       t[i] = str</div><div class="line">       i = i + <span class="number">1</span></div><div class="line">    <span class="keyword">end</span></div><div class="line">    <span class="keyword">return</span> t</div><div class="line"><span class="keyword">end</span></div><div class="line"><span class="keyword">local</span> a = <span class="string">"23245023496830,汉字。。。。"</span></div><div class="line"><span class="keyword">local</span> b = <span class="string">":"</span></div><div class="line">b = StrSplit(a,<span class="string">","</span>)</div><div class="line"><span class="built_in">print</span>(b[<span class="number">1</span>])</div></pre></td></tr></table></figure>
<h1 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h1><h2 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h2><p>&emsp;&emsp;数组就是同一类型数据，按照一定顺序排列的集合。数组可以是一维的，也可以是多维的。</p>
<p>&emsp;&emsp;Lua中的数组的索引键值可以使用整数表示,数组的大小是不固定的。</p>
<h2 id="一维数组"><a href="#一维数组" class="headerlink" title="一维数组"></a>一维数组</h2><p>&emsp;&emsp;一维数组是最简单的数组，逻辑结构是线性表。一维数组可以使用for循环输出数组中的元素：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">array = &#123;<span class="string">"Hello"</span>, <span class="string">"World!"</span>&#125;</div><div class="line"></div><div class="line"><span class="keyword">for</span> i= <span class="number">0</span>, <span class="number">2</span> <span class="keyword">do</span></div><div class="line">   <span class="built_in">print</span>(array[i])</div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>&emsp;&emsp;Lua的索引默认从1开始，可以指定从0甚至从负数开始，索引指定的位置没有数值返回nil。</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">array = &#123;&#125;</div><div class="line"></div><div class="line"><span class="keyword">for</span> i= <span class="number">-2</span>, <span class="number">2</span> <span class="keyword">do</span></div><div class="line">   array[i] = i *<span class="number">2</span></div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="keyword">for</span> i = <span class="number">-2</span>,<span class="number">2</span> <span class="keyword">do</span></div><div class="line">   <span class="built_in">print</span>(array[i])</div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<h2 id="多维数组"><a href="#多维数组" class="headerlink" title="多维数组"></a>多维数组</h2><p>&emsp;&emsp;多维数组分为两种。数组中包含数组，或者是一维数组的索引键对应一个数组。</p>
<p>&emsp;&emsp;三行三列多维数组：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment">-- 初始化数组</span></div><div class="line">array = &#123;&#125;</div><div class="line"><span class="keyword">for</span> i=<span class="number">1</span>,<span class="number">3</span> <span class="keyword">do</span></div><div class="line">   array[i] = &#123;&#125;</div><div class="line">      <span class="keyword">for</span> j=<span class="number">1</span>,<span class="number">3</span> <span class="keyword">do</span></div><div class="line">         array[i][j] = i*j</div><div class="line">      <span class="keyword">end</span></div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="comment">-- 访问数组</span></div><div class="line"><span class="keyword">for</span> i=<span class="number">1</span>,<span class="number">3</span> <span class="keyword">do</span></div><div class="line">   <span class="keyword">for</span> j=<span class="number">1</span>,<span class="number">3</span> <span class="keyword">do</span></div><div class="line">      <span class="built_in">print</span>(array[i][j])</div><div class="line">   <span class="keyword">end</span></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>&emsp;&emsp;不同索引键的三行三列阵列多维数组：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">-- 初始化数组</span></div><div class="line">array = &#123;&#125;</div><div class="line">maxRows = <span class="number">3</span></div><div class="line">maxColumns = <span class="number">3</span></div><div class="line"><span class="keyword">for</span> row=<span class="number">1</span>,maxRows <span class="keyword">do</span></div><div class="line">   <span class="keyword">for</span> col=<span class="number">1</span>,maxColumns <span class="keyword">do</span></div><div class="line">      array[row*maxColumns +col] = row*col</div><div class="line">   <span class="keyword">end</span></div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="comment">-- 访问数组</span></div><div class="line"><span class="keyword">for</span> row=<span class="number">1</span>,maxRows <span class="keyword">do</span></div><div class="line">   <span class="keyword">for</span> col=<span class="number">1</span>,maxColumns <span class="keyword">do</span></div><div class="line">      <span class="built_in">print</span>(array[row*maxColumns +col])</div><div class="line">   <span class="keyword">end</span></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<h1 id="迭代器"><a href="#迭代器" class="headerlink" title="迭代器"></a>迭代器</h1><h2 id="概念-1"><a href="#概念-1" class="headerlink" title="概念"></a>概念</h2><p>&emsp;&emsp;迭代器（iterator）是一种对象，它能够用来遍历标准模板库容器中的部分或全部元素，每个迭代器对象代表容器中的确定的地址。迭代器是一种支持指针类型的结构，它可以遍历集合的每一个元素。</p>
<h2 id="泛型for迭代器"><a href="#泛型for迭代器" class="headerlink" title="泛型for迭代器"></a>泛型for迭代器</h2><p>&emsp;&emsp;泛型 for 在自己内部保存迭代函数，实际上它保存三个值：迭代函数、状态常量、控制变量。泛型 for 迭代器提供了集合的 key/value 对，语法格式如下：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> k, v <span class="keyword">in</span> <span class="built_in">pairs</span>(t) <span class="keyword">do</span></div><div class="line">    <span class="built_in">print</span>(k, v)</div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>&emsp;&emsp;对于一个表来说，使用泛型for迭代器，用通俗直白的话来讲，k就是索引，v是索引对应的值，t则是这个表的表名。下面是一个实例：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">array = &#123;<span class="string">"Lua"</span>, <span class="string">"Tutorial"</span>&#125;</div><div class="line"><span class="keyword">for</span> key,value <span class="keyword">in</span> <span class="built_in">ipairs</span>(array) </div><div class="line"><span class="keyword">do</span></div><div class="line">   <span class="built_in">print</span>(key, value)</div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>&emsp;&emsp;上面的代码输出结果为：</p>
<blockquote>
<p>1  Lua<br>2  Tutorial</p>
</blockquote>
<p>&emsp;&emsp;</p>
<h1 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h1><h2 id="常用的几种遍历方式"><a href="#常用的几种遍历方式" class="headerlink" title="常用的几种遍历方式"></a>常用的几种遍历方式</h2><p>&emsp;&emsp;第一种，按照key的hash值排列的顺序遍历。</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> key, value <span class="keyword">in</span> <span class="built_in">pairs</span>(tbtest) <span class="keyword">do</span>      </div><div class="line">    XXX  </div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>&emsp;&emsp;第二种，要求Key是连续的，从1开始的数字。ipairs只会从1开始按连续的key顺序遍历到key不连续为止。</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> key, value <span class="keyword">in</span> <span class="built_in">ipairs</span>(tbtest) <span class="keyword">do</span>      </div><div class="line">    XXX  </div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>&emsp;&emsp;第三种，必须存在1这个key，而且是从1开始依次加一的顺序，找到一个不是1的就不再进行遍历。</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> i=<span class="number">1</span>, #(tbtest) <span class="keyword">do</span>      </div><div class="line">    XXX  </div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&amp;emsp;&amp;emsp;学习资料地址：&lt;a href=&quot;http://www.runoob.com/lua/lua-tutorial.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.runoob.com/lua/lua-tut
    
    </summary>
    
    
      <category term="Lua" scheme="http://www.z16388.top/tags/Lua/"/>
    
  </entry>
  
  <entry>
    <title>Markdown编辑器Smark</title>
    <link href="http://www.z16388.top/2018/01/17/smark/"/>
    <id>http://www.z16388.top/2018/01/17/smark/</id>
    <published>2018-01-17T04:54:11.000Z</published>
    <updated>2018-01-17T05:06:03.245Z</updated>
    
    <content type="html"><![CDATA[<p>&emsp;&emsp;寒假到了，毕设也做完了，回到家之后我就更换了电脑，重做了系统。经过了漫长的系统更新以及某个臃肿的IDE的安装之后，到家第二天的中午终于能够使用我的老笔记本电脑了。在开始C#学习的时候，想要开一个博客文章记录一下学习的内容的时候。发现在安装之前使用过的MarkdownPad的时候，出现了异常，研究半天也没有研究好，只得去寻找其他的Markdown编辑器。</p>
<p>&emsp;&emsp;我找到了一款名为Smark的编辑器。这是一个开源的编辑器，虽然三年没有更新，但是作为一款Markdown文本编辑器它还是很中规中矩的。</p>
<p>&emsp;&emsp;首先是安装部分。原项目的地址在<a href="https://gitee.com/elerao/Smark" target="_blank" rel="external">https://gitee.com/elerao/Smark</a>相关的一些介绍可以查看项目的具体信息。文中出现的链接部分失效，相关的下载内容有雷锋转移到了<a href="http://pan.baidu.com/s/1pJnrX5x" target="_blank" rel="external">http://pan.baidu.com/s/1pJnrX5x</a>。</p>
<p>&emsp;&emsp;我在解压后直接就能使用，不同平台和其他异常情况参见原项目的内容介绍，下面将一些使用的注意事项。</p>
<ol>
<li><p>默认情况下，编辑栏在右侧，习惯之后反而觉得很方便。</p>
</li>
<li><p>没有实时渲染的功能，只能够渲染已经保存的内容。其实这个我觉得应该是一个优势，因为我经常会有写东西写一半忘了保存的时候，这个小缺陷能够随时提醒你要进行保存。没有保存的行在编辑器中会有灰色的背景标记，比较明显。</p>
</li>
</ol>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&amp;emsp;&amp;emsp;寒假到了，毕设也做完了，回到家之后我就更换了电脑，重做了系统。经过了漫长的系统更新以及某个臃肿的IDE的安装之后，到家第二天的中午终于能够使用我的老笔记本电脑了。在开始C#学习的时候，想要开一个博客文章记录一下学习的内容的时候。发现在安装之前使用过的
    
    </summary>
    
    
      <category term="hexo" scheme="http://www.z16388.top/tags/hexo/"/>
    
      <category term="markdown" scheme="http://www.z16388.top/tags/markdown/"/>
    
  </entry>
  
  <entry>
    <title>评论系统Valine的使用</title>
    <link href="http://www.z16388.top/2018/01/10/valine/"/>
    <id>http://www.z16388.top/2018/01/10/valine/</id>
    <published>2018-01-10T14:02:29.000Z</published>
    <updated>2018-01-10T14:26:26.872Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>&emsp;&emsp;Valine是一款基于Leancloud的快速、简洁且高效的无后端评论系统。</p>
</blockquote>
<p>&emsp;&emsp;由于某些原因，博客的一些评论系统被查水表了。忙于考研的原因，一直没有更新评论系统。今天给博客更新了一下主题，也使用了新的评论系统。</p>
<p>&emsp;&emsp;进入<a href="https://leancloud.cn" target="_blank" rel="external">https://leancloud.cn</a>，点击免费试用，注册账号。根据Valine创建好应用，配置好各种参数即可使用。</p>
<p>&emsp;&emsp;值得一提的是，头像参数最好设置为<code>‘’<code>，信息参数最好设置为用户名与邮箱。</code></code></p>
<p>&emsp;&emsp;头像信息在<a href="https://cn.gravatar.com/" target="_blank" rel="external">https://cn.gravatar.com/</a>进行设置。</p>
<blockquote>
<p>Gravatar是一图像跟随著您到访过的网站，当您在博客中留言或发表文章，它将会出现在您的名称旁。</p>
</blockquote>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;&amp;emsp;&amp;emsp;Valine是一款基于Leancloud的快速、简洁且高效的无后端评论系统。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&amp;emsp;&amp;emsp;由于某些原因，博客的一些评论系统被查水表了。忙于考研的原因，一直没有更新评论系统
    
    </summary>
    
    
      <category term="hexo" scheme="http://www.z16388.top/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>免备案又免费的域名转发</title>
    <link href="http://www.z16388.top/2018/01/10/urlchange/"/>
    <id>http://www.z16388.top/2018/01/10/urlchange/</id>
    <published>2018-01-10T13:47:18.000Z</published>
    <updated>2018-01-11T03:40:41.463Z</updated>
    
    <content type="html"><![CDATA[<p>&emsp;&emsp;由于.win域名的不稳定，无法备案，无法被搜索引擎收录等问题，我将博客的域名换为同样廉价的.top域名。然而Github Pages只支持一个域名的绑定，这就使我之前的域名变得无法使用。但是我通过各种渠道去宣传，使用这个域名已经很久了，更换起来也比较麻烦。因此，只能维持.win域名，明进行显式的域名转发。</p>
<p>&emsp;&emsp;万网的域名转发转功能有两个条件，一是必须是万网的域名，二是域名要进行备案。Github Pages无法进行备案，因此不能直接使用万网的解析。</p>
<p>&emsp;&emsp;经过测试，米发的域名转发功能最方便。<a href="https://www.mfpad.com/" target="_blank" rel="external">https://www.mfpad.com/</a></p>
<p>&emsp;&emsp;注册账号，添加域名，然后将域名解析到米发分配的CNAME即可。当然，@和www都要进行一次记录。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&amp;emsp;&amp;emsp;由于.win域名的不稳定，无法备案，无法被搜索引擎收录等问题，我将博客的域名换为同样廉价的.top域名。然而Github Pages只支持一个域名的绑定，这就使我之前的域名变得无法使用。但是我通过各种渠道去宣传，使用这个域名已经很久了，更换起来也比较
    
    </summary>
    
    
      <category term="hexo" scheme="http://www.z16388.top/tags/hexo/"/>
    
      <category term="域名" scheme="http://www.z16388.top/tags/%E5%9F%9F%E5%90%8D/"/>
    
  </entry>
  
  <entry>
    <title>QT笔记-基础篇</title>
    <link href="http://www.z16388.top/2017/07/12/qt/"/>
    <id>http://www.z16388.top/2017/07/12/qt/</id>
    <published>2017-07-12T07:46:28.000Z</published>
    <updated>2017-07-12T15:26:41.906Z</updated>
    
    <content type="html"><![CDATA[<h1 id="基础部分"><a href="#基础部分" class="headerlink" title="基础部分"></a>基础部分</h1><h3 id="修改某个控件显示的文字（优先级比属性高）"><a href="#修改某个控件显示的文字（优先级比属性高）" class="headerlink" title="修改某个控件显示的文字（优先级比属性高）"></a>修改某个控件显示的文字（优先级比属性高）</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">ui-&gt;pushButton-&gt;setText(tr(<span class="string">"新的"</span>));</div><div class="line"><span class="comment">//在软件中应避免直接出现中文字符串，应该使用tr()函数包含</span></div><div class="line"><span class="comment">//这段代码如果用于控件的初始化，应当写在构造函数中</span></div></pre></td></tr></table></figure>
<h3 id="弹出警告对话框"><a href="#弹出警告对话框" class="headerlink" title="弹出警告对话框"></a>弹出警告对话框</h3><blockquote>
<p>需要使用头文件<code>QMessageBox</code></p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">QMessageBox::warning(<span class="keyword">this</span>, tr(<span class="string">"警告！"</span>),</div><div class="line">                   tr(<span class="string">"用户名或密码错误！"</span>),</div><div class="line">                   QMessageBox::Yes);</div></pre></td></tr></table></figure>
<p>&emsp;&emsp;从上面的例子我们可以看出这个函数的参数分别为：父窗口、对话框标题、对话框的显示内容、对话框中的按钮。也就是说，上面这段代码实现的是弹出一个提示密码输入错误的，带有一个Yes按钮的警告对话框。</p>
<p>&emsp;&emsp;<em> 注：需要使用头文件<code> #include <qmessagebox></qmessagebox></code> </em></p>
<h3 id="登陆窗口的创建步骤"><a href="#登陆窗口的创建步骤" class="headerlink" title="登陆窗口的创建步骤"></a>登陆窗口的创建步骤</h3><ol>
<li>在项目视图中，右键-&gt;添加文件-&gt;QT-&gt;QT设计师界面类</li>
<li>在创建好的登陆窗口中新建一个按钮，切换成“控件和槽编辑模式”，拖动按钮，放开鼠标后，会弹出配置连接对话框。将pushButton的clicked()信号和LoginDlg的accept()槽关联起来。<em>其中，accept()槽的功能是：将对话框关闭并返回QDialog::Accepted标识。</em></li>
<li>修改main函数：<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"mainwindow.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QApplication&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"logindlg.h"</span>                      <span class="comment">// 增加登陆窗口的头文件</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[])</span></span></div><div class="line">&#123;</div><div class="line">    <span class="function">QApplication <span class="title">a</span><span class="params">(argc, argv)</span></span>;</div><div class="line">    MainWindow w;</div><div class="line">    LoginDlg dlg;                          <span class="comment">// 声明</span></div><div class="line">    <span class="keyword">if</span>(dlg.exec() == QDialog::Accepted)    <span class="comment">// 利用Accepted返回值判断按钮是否被按下</span></div><div class="line">    &#123;</div><div class="line">        w.show();                          <span class="comment">// 如果被按下，显示主窗口</span></div><div class="line">        <span class="keyword">return</span> a.exec();                   <span class="comment">// 程序一直执行，直到主窗口关闭</span></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">else</span> <span class="keyword">return</span> <span class="number">0</span>;                         <span class="comment">// 如果没有被按下，则不会进入主窗口，整个程序结束运行</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ol>
<p>&emsp;&emsp;在上面的代码中，我们首先创建了LoginDlg类的对象dlg，然后让dlg运行，即执行<code>exec()</code>函数，然后判断它的返回值。如果用户按下了按钮，那么返回值应该是Accepted，这个时候就会显示主窗口，并正常执行程序；否则，结束程序。</p>
<p>&emsp;&emsp;另外，在平时写程序的时候，我们需要控制Accepted返回值，可以使用<code>accept()</code>函数。以点击登陆按钮直接进入为例：<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">void</span> LoginDialog::on_loginBtn_clicked()</div><div class="line">&#123;</div><div class="line">    accept();</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="密码输入框"><a href="#密码输入框" class="headerlink" title="密码输入框"></a>密码输入框</h3><p>&emsp;&emsp;首先，新建一个文本条。然后在这个文本条所在的窗口的构造函数中将它的EchoMode属性更改为密码条就行了。例子如下：<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ui-&gt;pswEdit-&gt;setEchoMode(QLineEdit::Password);</div></pre></td></tr></table></figure></p>
<h3 id="去除输入中的空格"><a href="#去除输入中的空格" class="headerlink" title="去除输入中的空格"></a>去除输入中的空格</h3><p>&emsp;&emsp;使用函数<code>trimmed()</code></p>
<h3 id="清除文本条、光标定位"><a href="#清除文本条、光标定位" class="headerlink" title="清除文本条、光标定位"></a>清除文本条、光标定位</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">ui-&gt;usrLineEdit-&gt;clear();</div><div class="line">ui-&gt;usrLineEdit-&gt;setFocus();</div></pre></td></tr></table></figure>
<h3 id="创建新窗口之后、原窗口不消失的窗口"><a href="#创建新窗口之后、原窗口不消失的窗口" class="headerlink" title="创建新窗口之后、原窗口不消失的窗口"></a>创建新窗口之后、原窗口不消失的窗口</h3><ol>
<li>对一个按钮右键-&gt;”转到槽”；</li>
<li>选择“clicked()”信号，确定，然后自动转到当前窗口代码编辑模式中的<code>on_pushButton_clicked()</code>函数处；</li>
<li>补充函数体：（需要添加头文件<code>#include <qdialog.h></qdialog.h></code>）<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">void</span> MainWindow::on_pushButton_clicked()</div><div class="line">&#123;</div><div class="line">   QDialog *dlg = <span class="keyword">new</span> QDialog(<span class="keyword">this</span>);</div><div class="line">   dlg-&gt;show();  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ol>
<p>&emsp;&emsp;在上面的代码中实现了创建一个对话框对象，然后让它显示出来，创建时指定的this参数表明这个对话框的父窗口是MainWindow。</p>
<p>&emsp;&emsp;这种方法，会让我们每按一次按钮，都会生成一个新的对话框。但是在这个过程中，不会造成内存泄漏或者是内存耗尽，这得益于QT的对象机制，保证了不会造成内存泄漏，而且不需要使用delete语句。</p>
<p>&emsp;&emsp;在日常使用的过程中，我们可以在<code>mainwindow.h</code>文件中先定义一个对话框对象，并在构造函数中进行创建，再在这里使用。</p>
<h3 id="创建一个退出按钮"><a href="#创建一个退出按钮" class="headerlink" title="创建一个退出按钮"></a>创建一个退出按钮</h3><ol>
<li>单击设计模式下方的信号和槽编辑器（Signals &amp; Slots Editor）中的绿色加法号添加关联；</li>
<li>发送者为按钮，信号为<code>clicked()</code>，接受者为当前窗口，操为<code>close()</code>。</li>
</ol>
<h1 id="QT-Creator常用命令"><a href="#QT-Creator常用命令" class="headerlink" title="QT Creator常用命令"></a>QT Creator常用命令</h1><p>Ctrl+滚轮：控制字体大小</p>
<p>Ctrl+1~6：切换左侧边栏，如常用的Ctrl+2(编辑)、Ctrl+3(设计)</p>
<p>Ctrl+R：编译</p>
<p>F3：控件编辑模式</p>
<p>F4：信号和槽编辑模式</p>
<h1 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h1><p><a href="http://www.kuqin.com/qtdocument/index.html" target="_blank" rel="external">API和文档</a></p>
<p><a href="http://www.qter.org/portal.php?mod=list&amp;catid=6&amp;page=1" target="_blank" rel="external">QT开源社区 教程目录</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;基础部分&quot;&gt;&lt;a href=&quot;#基础部分&quot; class=&quot;headerlink&quot; title=&quot;基础部分&quot;&gt;&lt;/a&gt;基础部分&lt;/h1&gt;&lt;h3 id=&quot;修改某个控件显示的文字（优先级比属性高）&quot;&gt;&lt;a href=&quot;#修改某个控件显示的文字（优先级比属性高）&quot; cla
    
    </summary>
    
    
      <category term="QT" scheme="http://www.z16388.top/tags/QT/"/>
    
  </entry>
  
  <entry>
    <title>数学模型中的Huntington除数法</title>
    <link href="http://www.z16388.top/2017/05/19/Huntington/"/>
    <id>http://www.z16388.top/2017/05/19/Huntington/</id>
    <published>2017-05-19T14:36:44.000Z</published>
    <updated>2017-05-22T10:42:40.359Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>本篇博客请结合《数学模型（第四版）》，姜启源版教材第八章第四节内容阅读。</p>
</blockquote>
<p>&emsp;&emsp;在处理席位分析问题时，常使用Huntington除数法来进行处理。在书中279~281的学习中，我们了解到了怎样去比较一个分配结果的不公平度，以及一个较惯例分配法更加公平的“Q值法”。那么，下面我将介绍一种处理这类问题的通用方法，Huntington除数法。</p>
<p>&emsp;&emsp;Edward Vermilye Huntington(1874~1952)，1922年获得哈佛大学博士学位。20世纪20年代，他对这个问题做了具体的研究，提出了一系列的席位分配方法。之前介绍过的“Q值法”，也作为其中的一种情况，包含在内。</p>
<p>&emsp;&emsp;假设共有<code>m</code>方分配<code>N</code>个席位，第<code>i</code>方的人数记为<code>pi</code>,<code>ni</code>表示第<code>i</code>方分配的席位数，且均为非负整数。</p>
<table>
<thead>
<tr>
<th style="text-align:center">Huntington除数法</th>
<th style="text-align:center">除数&emsp;d(n)</th>
<th style="text-align:center">不公平度的度量指标(假定pi/ni&gt;pj/nj)</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">最大除数法(GD)</td>
<td style="text-align:center">n+1</td>
<td style="text-align:center">(nj-pi)/pj-ni</td>
</tr>
<tr>
<td style="text-align:center">主要分数法(MF)</td>
<td style="text-align:center">n+1/2</td>
<td style="text-align:center">(nj/pj)-(ni-pi)</td>
</tr>
<tr>
<td style="text-align:center">相等比例法(EP)</td>
<td style="text-align:center">sqrt(n(n+1))</td>
<td style="text-align:center">(njpi)/(nipj)-1</td>
</tr>
<tr>
<td style="text-align:center">调和平均法(HM)</td>
<td style="text-align:center">2n(n+1)/(2n+1)</td>
<td style="text-align:center">pi/ni-pj/nj</td>
</tr>
<tr>
<td style="text-align:center">最小除数法(SD)</td>
<td style="text-align:center">n</td>
<td style="text-align:center">nj-nipj/pi</td>
</tr>
</tbody>
</table>
<p>&emsp;&emsp;下面是这个方法的思路：首先，我们对每一方都分配一个席位，然后利用选定的衡量指标，计算出每一方的不公平度。给最大的那一组，分配一个席位，然后继续计算，直到将所有席位分配完毕。一般情况下，在使用Huntington除数法时，通常在各方自动分得1席的基础上在做分配，除非在各方人数悬殊且席位数较少的时候。</p>
<p>&emsp;&emsp;由于在计算的过程中，采用了每增加1席计算一次的方式，因此不会出现席位悖论和人口悖论。</p>
<p>&emsp;&emsp;下面是C语言写的Huntington算法。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">int</span> w;</div><div class="line">FILE *fin=fopen(<span class="string">"in.txt"</span>,<span class="string">"r"</span>);</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">double</span> <span class="title">dn</span><span class="params">(<span class="keyword">int</span> n)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">switch</span>(w)</div><div class="line">    &#123;</div><div class="line">        <span class="keyword">case</span> <span class="number">1</span>:<span class="keyword">return</span> n+<span class="number">1.0</span>;</div><div class="line">        <span class="keyword">case</span> <span class="number">2</span>:<span class="keyword">return</span> n+<span class="number">0.5</span>;</div><div class="line">        <span class="keyword">case</span> <span class="number">3</span>:<span class="keyword">return</span> <span class="built_in">sqrt</span>(n*(n+<span class="number">1.0</span>));</div><div class="line">        <span class="keyword">case</span> <span class="number">4</span>:<span class="keyword">return</span> <span class="number">2</span>*n*(n+<span class="number">1.0</span>)/(<span class="number">2</span>*n+<span class="number">1</span>);</div><div class="line">        <span class="keyword">case</span> <span class="number">5</span>:<span class="keyword">return</span> n;</div><div class="line">        <span class="keyword">default</span>:<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">Huntington</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> s,flag=<span class="number">0</span>,bh=<span class="number">1</span>;</div><div class="line">    <span class="keyword">double</span> p[<span class="number">6</span>],pd[<span class="number">6</span>];</div><div class="line">    <span class="keyword">int</span> n[<span class="number">6</span>];</div><div class="line">    <span class="keyword">double</span> max_pd;</div><div class="line">    <span class="built_in">fscanf</span>(fin,<span class="string">"%d"</span>,&amp;s);</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">5</span>;i++)</div><div class="line">    &#123;</div><div class="line">        <span class="built_in">fscanf</span>(fin,<span class="string">"%lf"</span>,&amp;p[i]);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">5</span>;i++)</div><div class="line">    &#123;</div><div class="line">        n[i]=<span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">while</span>(n[<span class="number">1</span>]+n[<span class="number">2</span>]+n[<span class="number">3</span>]+n[<span class="number">4</span>]+n[<span class="number">5</span>]!=s)</div><div class="line">    &#123;</div><div class="line">        flag=<span class="number">1</span>;</div><div class="line"></div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">5</span>;i++)</div><div class="line">        &#123;</div><div class="line">            pd[i] = p[i]/dn(n[i]);</div><div class="line">        &#125;</div><div class="line">        max_pd = p[<span class="number">1</span>]/dn(n[<span class="number">1</span>]);</div><div class="line"></div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>;i&lt;=<span class="number">5</span>;i++)</div><div class="line">        &#123;</div><div class="line">            <span class="keyword">if</span>(pd[i]&gt;max_pd)</div><div class="line">            &#123;</div><div class="line">                flag = i,max_pd = pd[i];</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        n[flag]++;</div><div class="line"></div><div class="line">        <span class="built_in">cout</span>&lt;&lt;<span class="string">"第"</span>&lt;&lt;bh++&lt;&lt;<span class="string">"次："</span>&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">5</span>;i++)</div><div class="line">            <span class="built_in">cout</span>&lt;&lt;<span class="string">"p/di="</span>&lt;&lt;pd[i]&lt;&lt;<span class="string">"  n="</span>&lt;&lt;n[i]&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">        <span class="built_in">cout</span>&lt;&lt;<span class="string">"--------------------"</span>&lt;&lt;<span class="built_in">endl</span>;</div><div class="line"></div><div class="line">    &#125;</div><div class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">printList</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"#请选择需要模拟的权重函数#"</span>&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"1.最大除数法(GD)"</span>&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"2.主要分数法(MF)"</span>&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"3.相等比例法(EP)"</span>&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"4.调和平均法(HM)"</span>&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"5.最小除数法(SD)"</span>&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"--------------------"</span>&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"退出请输入0"</span>&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">select</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    printList();</div><div class="line">    <span class="keyword">while</span>(<span class="built_in">cin</span>&gt;&gt;w) &#123;</div><div class="line">        <span class="keyword">switch</span> (w)</div><div class="line">        &#123;</div><div class="line">            <span class="keyword">case</span> <span class="number">1</span>:<span class="keyword">case</span> <span class="number">2</span>:<span class="keyword">case</span> <span class="number">3</span>:<span class="keyword">case</span> <span class="number">4</span>:<span class="keyword">case</span> <span class="number">5</span>:</div><div class="line">                Huntington();</div><div class="line">                select();</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            <span class="keyword">case</span> <span class="number">0</span>:fclose(fin);<span class="built_in">exit</span>(<span class="number">0</span>);</div><div class="line">            <span class="keyword">default</span>:</div><div class="line">                <span class="built_in">cout</span>&lt;&lt;<span class="string">"输入错误，请重新输入"</span>&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">                <span class="built_in">cout</span>&lt;&lt;<span class="string">"--------------------"</span>&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">                select();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    select();</div><div class="line">    fclose(fin);</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>&emsp;&emsp;GD法偏向于人数多的组，SD法偏向于人数少的组。Huntington推荐偏向适中的EP法，也就是“Q值法”，该方法在1930年后一直在被美国国会众议员席位分配中采用。</p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;本篇博客请结合《数学模型（第四版）》，姜启源版教材第八章第四节内容阅读。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&amp;emsp;&amp;emsp;在处理席位分析问题时，常使用Huntington除数法来进行处理。在书中279~281的学习中，我们了解到了
    
    </summary>
    
    
      <category term="数学" scheme="http://www.z16388.top/tags/%E6%95%B0%E5%AD%A6/"/>
    
      <category term="数学模型" scheme="http://www.z16388.top/tags/%E6%95%B0%E5%AD%A6%E6%A8%A1%E5%9E%8B/"/>
    
  </entry>
  
  <entry>
    <title>VS调试时提示找不到msvcr80d.dll解决方案</title>
    <link href="http://www.z16388.top/2017/04/15/vs1/"/>
    <id>http://www.z16388.top/2017/04/15/vs1/</id>
    <published>2017-04-15T02:18:53.000Z</published>
    <updated>2017-04-15T02:30:57.722Z</updated>
    
    <content type="html"><![CDATA[<p>&emsp;&emsp;在学校的很多课程中，需要使用到Visual Studio。在编写程序进行调试的时候，经常会出现报错“找不到msvcr80d.dll”的情况，让人很头疼。</p>
<p>&emsp;&emsp;这个是由于调试类型和硬盘的格式造成的。在学校机房的环境里，可以进行一下的步骤解决问题：</p>
<ol>
<li>项目 -&gt; [项目名] 属性 -&gt; 配置属性 -&gt; 清单工具 -&gt; 常规 -&gt; 将“使用FAT解决办法”的属性设置为“是”。</li>
<li>进行设置之后，保存，执行: 生成 -&gt; 重新生成解决方案</li>
<li>重新调试</li>
</ol>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&amp;emsp;&amp;emsp;在学校的很多课程中，需要使用到Visual Studio。在编写程序进行调试的时候，经常会出现报错“找不到msvcr80d.dll”的情况，让人很头疼。&lt;/p&gt;
&lt;p&gt;&amp;emsp;&amp;emsp;这个是由于调试类型和硬盘的格式造成的。在学校机房的环境里，
    
    </summary>
    
    
      <category term="Visual-Studio" scheme="http://www.z16388.top/tags/Visual-Studio/"/>
    
  </entry>
  
  <entry>
    <title>dfs专项练习</title>
    <link href="http://www.z16388.top/2017/03/30/dfs/"/>
    <id>http://www.z16388.top/2017/03/30/dfs/</id>
    <published>2017-03-30T10:52:27.000Z</published>
    <updated>2018-01-10T13:39:57.471Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://poj.org/problem?id=1664" target="_blank" rel="external">poj1664:放苹果</a></p>
<p><a href="http://acm.hdu.edu.cn/showproblem.php?pid=1016" target="_blank" rel="external">hdu1016:素数环问题</a></p>
<p><a href="http://acm.hdu.edu.cn/showproblem.php?pid=2553" target="_blank" rel="external">hdu2553:N皇后问题</a></p>
<p><a href="http://acm.hdu.edu.cn/showproblem.php?pid=1584" target="_blank" rel="external">hdu1584:蜘蛛牌</a></p>
<p><a href="http://acm.hdu.edu.cn/showproblem.php?pid=1181" target="_blank" rel="external">hdu1181:变形课</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;a href=&quot;http://poj.org/problem?id=1664&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;poj1664:放苹果&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://acm.hdu.edu.cn/showproblem
    
    </summary>
    
    
      <category term="ACM" scheme="http://www.z16388.top/tags/ACM/"/>
    
      <category term="算法" scheme="http://www.z16388.top/tags/%E7%AE%97%E6%B3%95/"/>
    
      <category term="ACM教程" scheme="http://www.z16388.top/tags/ACM%E6%95%99%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>【ACM教程】3.8从全排列到深度优先搜索dfs算法</title>
    <link href="http://www.z16388.top/2017/03/22/%E3%80%90ACM%E6%95%99%E7%A8%8B%E3%80%913-8%E4%BB%8E%E5%85%A8%E6%8E%92%E5%88%97%E5%88%B0%E6%B7%B1%E5%BA%A6%E4%BC%98%E5%85%88%E6%90%9C%E7%B4%A2dfs%E7%AE%97%E6%B3%95/"/>
    <id>http://www.z16388.top/2017/03/22/【ACM教程】3-8从全排列到深度优先搜索dfs算法/</id>
    <published>2017-03-22T08:37:34.000Z</published>
    <updated>2018-01-10T12:18:33.065Z</updated>
    
    <content type="html"><![CDATA[<h1 id="第八节-从全排列到深度优先搜索算法"><a href="#第八节-从全排列到深度优先搜索算法" class="headerlink" title="第八节 从全排列到深度优先搜索算法"></a>第八节 从全排列到深度优先搜索算法</h1><h2 id="全排列"><a href="#全排列" class="headerlink" title="全排列"></a>全排列</h2><p>&emsp;&emsp;什么是全排列？就是一组数据所有可能的排列顺序。如果使用暴力枚举的方法，需要对每一个位置都进行一次循环，如果有n个数据则需要循环n次，而且还要加上对重复序列的判断。</p>
<p>&emsp;&emsp;可喜的是，在STL中有两个函数可以帮我们实现字典序的全排列。他们分别是：<code>next_permutation()</code><code>prev_permutation()</code>，参数是数据的开始和结束地址。举个例子，比如一个字符数组：a,b,c，它的下一个序列就是a,c,b。在处理全排列问题的时候，使用比较方便。这两个函数在算法头文件中。</p>
<p>&emsp;&emsp;由于这两个函数是根据字典序来给出下一个全排列，如果想要得出所有的全排列，则需要首先对序列进行排序。</p>
<p>&emsp;&emsp;蓝桥杯中很多题目可以使用这种方法来解决，以第七届蓝桥杯的第三题为例：</p>
<blockquote>
<p>　　B　　 DEF<br>A +  ——  +  ———   =  10<br>　　C　　 GHI<br>这个算式中A~I代表1~9的数字，不同的字母代表不同的数字。<br>比如：<br>6+8/3+952/714 就是一种解法，<br>5+3/1+972/486 是另一种解法。<br>这个算式一共有多少种解法？<br>注意：你提交应该是个整数，不要填写任何多余的内容或说明性文字。</p>
</blockquote>
<p>&emsp;&emsp;代码如下：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">int</span> a[<span class="number">10</span>];</div><div class="line">    <span class="keyword">int</span> i;</div><div class="line">    <span class="keyword">int</span> sum[<span class="number">4</span>];</div><div class="line">    <span class="keyword">int</span> ans;</div><div class="line"></div><div class="line">    <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=<span class="number">9</span>;++i)&#123;</div><div class="line">        a[i]=i;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    ans=<span class="number">0</span>;</div><div class="line">    <span class="keyword">do</span>&#123;</div><div class="line">        sum[<span class="number">0</span>]=a[<span class="number">1</span>]*a[<span class="number">3</span>]*(a[<span class="number">7</span>]*<span class="number">100</span>+a[<span class="number">8</span>]*<span class="number">10</span>+a[<span class="number">9</span>]);</div><div class="line">        sum[<span class="number">1</span>]=a[<span class="number">2</span>]*(a[<span class="number">7</span>]*<span class="number">100</span>+a[<span class="number">8</span>]*<span class="number">10</span>+a[<span class="number">9</span>]);</div><div class="line">        sum[<span class="number">2</span>]=(a[<span class="number">4</span>]*<span class="number">100</span>+a[<span class="number">5</span>]*<span class="number">10</span>+a[<span class="number">6</span>])*a[<span class="number">3</span>];</div><div class="line">        sum[<span class="number">3</span>]=<span class="number">10</span>*a[<span class="number">3</span>]*(a[<span class="number">7</span>]*<span class="number">100</span>+a[<span class="number">8</span>]*<span class="number">10</span>+a[<span class="number">9</span>]);</div><div class="line"></div><div class="line">        <span class="keyword">if</span>(sum[<span class="number">0</span>]+sum[<span class="number">1</span>]+sum[<span class="number">2</span>]==sum[<span class="number">3</span>])&#123;</div><div class="line">            ++ans;</div><div class="line">        &#125;</div><div class="line">    &#125;<span class="keyword">while</span>(next_permutation(a+<span class="number">1</span>,a+<span class="number">1</span>+<span class="number">9</span>));</div><div class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,ans);</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="深度优先搜索dfs算法"><a href="#深度优先搜索dfs算法" class="headerlink" title="深度优先搜索dfs算法"></a>深度优先搜索dfs算法</h2><p>&emsp;&emsp;突然想要感叹一句：终于要讲到dfs算法了。为什么要发出这样的感叹呢，因为从这里开始，我们真正要接触到算法的内容了。之前的学习都可以说是小打小闹，到这里再是正主。</p>
<p>&emsp;&emsp;事实上，深度优先搜索属于图算法的一种，英文缩写为DFS即Depth First Search。其过程简要来说是对每一个可能的分支路径深入到不能再深入为止，而且每个节点只能访问一次。dfs算法是算法学习过程中的重中之重，因为全排列是个一维的过程，为了便于大家的理解，我就从它开始吧。</p>
<p>&emsp;&emsp;有a、b、c三个盒子，以及1，2，3三只球。我们将球放到盒子里，每个盒子只能放一个球，求一共有几种放法。如果形象地形容这个全排列的过程，将会是这个样子：首先按照字典序顺序放球，也就是在a盒子中放1号球，b盒子中放2号球，c盒子中放3号球。再向后走就没有盒子了，同时我们手中也没有剩余球了。这个时候，往回走，寻找有没有其他的放球顺序。先回到c盒子前拿出3号球，再到b盒子前拿出2号球。这时候，又产生了一种排列方式：把3号球放到b盒子中，2号球放到c盒子中。接下来以此类推，产生剩余的序列。</p>
<p>&emsp;&emsp;那么，我们把上面的过程用程序来模拟一下。首先是第一种放置方法，先按照升序将球放好：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) &#123;</div><div class="line">    a[step] = i;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>&emsp;&emsp;这里的数组a表示盒子的序列，变量step表示我们正处在第step个盒子的前面。a[step]=i的意思就是将第i个球放到第step个盒子里。但是需要注意的是，球一旦放进一个盒子里，就不能放在另一个盒子里了。这时候，我们需要记录一下。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i;i&lt;=n;i++) &#123;</div><div class="line">    <span class="keyword">if</span>(book[i]==<span class="number">0</span>) &#123; <span class="comment">//book[i]==0表示球还在我们手上</span></div><div class="line">        a[step]=i;</div><div class="line">        book[i]=<span class="number">1</span>;   <span class="comment">//标记i号球已经放到盒子里了</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>&emsp;&emsp;那么，我们既然在第step个盒子里放球了，后面就要继续向后放了。很明显，这是一个递归的过程。我们将要写的过程封装到函数里，将这个函数命名为dfs。然后在里面处理第step+1个盒子。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> step)</span> </span>&#123;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i;i&lt;=n;i++) &#123;</div><div class="line">        <span class="keyword">if</span>(book[i]==<span class="number">0</span>) &#123; </div><div class="line">            a[step]=i;</div><div class="line">            book[i]=<span class="number">1</span>;</div><div class="line">            dfs(step+<span class="number">1</span>);</div><div class="line">            book[i]=<span class="number">0</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>&emsp;&emsp;细心的同学可能已经注意到了，除了除以step+1个盒子之外，我们还另外加了一行代码<code>book[i]=0</code>，为什么要加上这一句呢？我们想一下，递归放完所有的球之后，我们是不是在回来的过程中要将这个球从盒子里拿出来呀。如果没有这个操作，这将会对接下来的放置造成障碍。</p>
<p>&emsp;&emsp;在之前的学习中，我们都知道，递归必须要有一个停止条件。转换到这个问题中就是：我们应该在什么时候将计算完毕的全排列输出出来呢？答案是处理到第n+1个盒子时。在前面的“故事背景”中，我们在走到第四个盒子的位置时，发现这个地方没有盒子，就往回走了。这个时候就是要输出的时候。代码如下：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> step)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span>(step==n+<span class="number">1</span>) &#123;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) &#123;</div><div class="line">            <span class="built_in">printf</span>(<span class="string">"%d"</span>,a[i]);</div><div class="line">        &#125;</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"\n"</span>);</div><div class="line">        <span class="keyword">return</span>;    <span class="comment">//返回前一步</span></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i;i&lt;=n;i++) &#123;</div><div class="line">        <span class="keyword">if</span>(book[i]==<span class="number">0</span>) &#123; </div><div class="line">            a[step]=i;</div><div class="line">            book[i]=<span class="number">1</span>;</div><div class="line">            dfs(step+<span class="number">1</span>);</div><div class="line">            book[i]=<span class="number">0</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>&emsp;&emsp;整个过程我们模拟完毕了，整理得到完整的代码：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">int</span> a[<span class="number">10</span>],book[<span class="number">10</span>],n;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> step)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span>(step==n+<span class="number">1</span>) &#123;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) &#123;</div><div class="line">            <span class="built_in">printf</span>(<span class="string">"%d"</span>,a[i]);</div><div class="line">        &#125;</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"\n"</span>);</div><div class="line">        <span class="keyword">return</span>;    <span class="comment">//返回前一步</span></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i;i&lt;=n;i++) &#123;</div><div class="line">        <span class="keyword">if</span>(book[i]==<span class="number">0</span>) &#123; </div><div class="line">            a[step]=i;</div><div class="line">            book[i]=<span class="number">1</span>;</div><div class="line">            dfs(step+<span class="number">1</span>);</div><div class="line">            book[i]=<span class="number">0</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</div><div class="line">    dfs(<span class="number">1</span>);</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>&emsp;&emsp;这个问题虽然简单，但是包含了dfs的基本模型。理解dfs算法的关键在于理解“当下应该如何去做”。至于“下一步应该怎么做”是和当下的操作一样的。我们在处理第step个盒子和step+1个盒子的时候，都采用的是一样的操作。因此，我们可以整理出dfs的基本模型：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> step)</span> </span>&#123;</div><div class="line">    判断边界</div><div class="line">    尝试所有的可能 <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) &#123;</div><div class="line">        继续下一步 dfs(step+<span class="number">1</span>)</div><div class="line">    &#125;</div><div class="line">    返回</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>&emsp;&emsp;我们以一道题目为例，第七届蓝桥杯的第七题，剪邮票：</p>
<blockquote>
<p>如【图1.jpg】, 有12张连在一起的12生肖的邮票。<br>现在你要从中剪下5张来，要求必须是连着的。<br>（仅仅连接一个角不算相连）<br>比如，【图2.jpg】，【图3.jpg】中，粉红色所示部分就是合格的剪取。<br>请你计算，一共有多少种不同的剪取方法。<br>请填写表示方案数目的整数。<br>注意：你提交的应该是一个整数，不要填写任何多余的内容或说明性文字。</p>
</blockquote>
<p><img src="http://oda2v68ht.bkt.clouddn.com/1.jpg" alt=""><br>图1</p>
<p><img src="http://oda2v68ht.bkt.clouddn.com/2.jpg" alt=""><br>图2</p>
<p><img src="http://oda2v68ht.bkt.clouddn.com/3.jpg" alt=""><br>图3</p>
<p>&emsp;&emsp;我们先看一下一位同学错误的解法吧：<a href="http://blog.csdn.net/star92014/article/details/50942239" target="_blank" rel="external">http://blog.csdn.net/star92014/article/details/50942239</a></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"><span class="keyword">int</span> a[<span class="number">5</span>]=&#123;<span class="number">0</span>,&#125;;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">check</span><span class="params">()</span></span>&#123;</div><div class="line">    <span class="keyword">int</span> flag[<span class="number">5</span>]=&#123;<span class="number">0</span>,&#125;;</div><div class="line">    flag[<span class="number">0</span>]=<span class="number">1</span>;</div><div class="line">    <span class="keyword">int</span> check[<span class="number">5</span>]=&#123;<span class="number">0</span>,&#125;;</div><div class="line">    <span class="keyword">int</span> i,j;</div><div class="line"></div><div class="line">rep:    </div><div class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">5</span>;i++)&#123;</div><div class="line">        <span class="keyword">if</span>(flag[i]&amp;&amp;check[i]==<span class="number">0</span>)&#123;</div><div class="line">            check[i]=<span class="number">1</span>;</div><div class="line">            <span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;<span class="number">5</span>;j++)&#123;</div><div class="line">                <span class="keyword">if</span>(j==i)<span class="keyword">continue</span>;</div><div class="line">                <span class="keyword">if</span>(a[j]==a[i]+<span class="number">1</span>||a[j]==a[i]<span class="number">-1</span></div><div class="line">                ||a[j]==a[i]<span class="number">-4</span>||a[j]==a[i]+<span class="number">4</span>)&#123;</div><div class="line">                    flag[j]=<span class="number">1</span>;</div><div class="line">                &#125;</div><div class="line">            &#125;   </div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">5</span>;i++)&#123;</div><div class="line">        <span class="keyword">if</span>(flag[i]&amp;&amp;check[i]==<span class="number">0</span>)<span class="keyword">goto</span> rep;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">int</span> count=<span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">5</span>;i++)&#123;</div><div class="line">        <span class="keyword">if</span>(flag[i])count++;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span>(count==<span class="number">5</span>)<span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">    <span class="keyword">else</span> <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">    <span class="keyword">int</span> count=<span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span>(a[<span class="number">0</span>]=<span class="number">1</span>;a[<span class="number">0</span>]&lt;<span class="number">13</span>;a[<span class="number">0</span>]++)&#123;</div><div class="line">        <span class="keyword">for</span>(a[<span class="number">1</span>]=a[<span class="number">0</span>]+<span class="number">1</span>;a[<span class="number">1</span>]&lt;<span class="number">13</span>;a[<span class="number">1</span>]++)&#123;</div><div class="line">    <span class="comment">//  if(a[1]==a[0])continue;</span></div><div class="line">        <span class="keyword">for</span>(a[<span class="number">2</span>]=a[<span class="number">1</span>]+<span class="number">1</span>;a[<span class="number">2</span>]&lt;<span class="number">13</span>;a[<span class="number">2</span>]++)&#123;</div><div class="line">    <span class="comment">//  if(a[2]==a[0]||a[2]==a[1])continue;</span></div><div class="line">        <span class="keyword">for</span>(a[<span class="number">3</span>]=a[<span class="number">2</span>]+<span class="number">1</span>;a[<span class="number">3</span>]&lt;<span class="number">13</span>;a[<span class="number">3</span>]++)&#123;</div><div class="line">    <span class="comment">//  if(a[3]==a[0]||a[3]==a[1]||a[3]==a[2])continue;</span></div><div class="line">        <span class="keyword">for</span>(a[<span class="number">4</span>]=a[<span class="number">3</span>]+<span class="number">1</span>;a[<span class="number">4</span>]&lt;<span class="number">13</span>;a[<span class="number">4</span>]++)&#123;</div><div class="line">        <span class="comment">//if(a[4]==a[0]||a[4]==a[1]||a[4]==a[2]||a[4]==a[3])continue;</span></div><div class="line">        <span class="keyword">if</span>(check())&#123;</div><div class="line">            <span class="built_in">printf</span>(<span class="string">"%d %d %d %d %d\n"</span>,a[<span class="number">0</span>],a[<span class="number">1</span>],a[<span class="number">2</span>],a[<span class="number">3</span>],a[<span class="number">4</span>]);</div><div class="line">        count++;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    &#125;</div><div class="line">    &#125;</div><div class="line">    &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="built_in">printf</span>(<span class="string">"%d"</span>,count);</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>&emsp;&emsp;代码质量不说，这位同学得到的答案是202，是错误的。那么问题出在了哪里呢？是序列的重复问题。比如12345和12354。为了避免这种情况，我们除了增加判断条件之外，还可以从数据上入手，将序列改为<code>{1,2,3,4,6,7,8,9,11,12,13,14};</code>这样，在判断换行之后的左右侧元素时，就会有失效的元素，避免了重复。下面是代码：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">int</span> dir[<span class="number">4</span>] = &#123;<span class="number">1</span>,<span class="number">-1</span>,<span class="number">5</span>,<span class="number">-5</span>&#125;;</div><div class="line"><span class="keyword">int</span> temp1[<span class="number">12</span>] = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">11</span>,<span class="number">12</span>,<span class="number">13</span>,<span class="number">14</span>&#125;;</div><div class="line"><span class="keyword">int</span> temp2[<span class="number">5</span>];</div><div class="line"><span class="keyword">int</span> vis[<span class="number">5</span>];</div><div class="line"><span class="keyword">int</span> ans = <span class="number">0</span>;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> u)</span></span>&#123;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span> ;i&lt;<span class="number">4</span> ;i++)&#123;</div><div class="line">        <span class="keyword">int</span> t = temp2[u]+dir[i];</div><div class="line">        <span class="keyword">if</span>(t&gt;=<span class="number">1</span>&amp;&amp;t&lt;=<span class="number">14</span>)&#123;</div><div class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span> ;j&lt;<span class="number">5</span> ;j++)</div><div class="line">                <span class="keyword">if</span>(t==temp2[j]&amp;&amp;!vis[j])&#123;</div><div class="line">                    vis[j]=<span class="number">1</span>;</div><div class="line">                    dfs(j);</div><div class="line">                &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> a=<span class="number">0</span> ;a&lt;<span class="number">12</span> ;a++)&#123;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> b=a+<span class="number">1</span> ;b&lt;<span class="number">12</span> ;b++)&#123;</div><div class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> c=b+<span class="number">1</span> ;c&lt;<span class="number">12</span> ;c++)&#123;</div><div class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> d=c+<span class="number">1</span> ;d&lt;<span class="number">12</span> ;d++)&#123;</div><div class="line">                    <span class="keyword">for</span>(<span class="keyword">int</span> e=d+<span class="number">1</span> ;e&lt;<span class="number">12</span> ;e++)&#123;</div><div class="line">                        temp2[<span class="number">0</span>]=temp1[a];</div><div class="line">                        temp2[<span class="number">1</span>]=temp1[b];</div><div class="line">                        temp2[<span class="number">2</span>]=temp1[c];</div><div class="line">                        temp2[<span class="number">3</span>]=temp1[d];</div><div class="line">                        temp2[<span class="number">4</span>]=temp1[e];</div><div class="line">                        <span class="comment">//初始化访问标记数组</span></div><div class="line">                        <span class="built_in">memset</span>(vis,<span class="number">0</span>,<span class="keyword">sizeof</span>(vis));</div><div class="line">                        vis[<span class="number">0</span>]=<span class="number">1</span>;</div><div class="line">                        dfs(<span class="number">0</span>);</div><div class="line">                        <span class="comment">//连通性判断</span></div><div class="line">                        <span class="keyword">int</span> flag = <span class="number">1</span>;</div><div class="line">                        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span> ;i&lt;<span class="number">5</span> ;i++)&#123;</div><div class="line">                            <span class="keyword">if</span>(vis[i]==<span class="number">0</span>)&#123;</div><div class="line">                                flag = <span class="number">0</span>;</div><div class="line">                            &#125;</div><div class="line">                        &#125;</div><div class="line">                        <span class="keyword">if</span>(flag)ans++;</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,ans);</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>&emsp;&emsp;DFS专项练习：<a href="http://www.z16388.top/2017/03/30/dfs/">http://www.z16388.top/2017/03/30/dfs/</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;第八节-从全排列到深度优先搜索算法&quot;&gt;&lt;a href=&quot;#第八节-从全排列到深度优先搜索算法&quot; class=&quot;headerlink&quot; title=&quot;第八节 从全排列到深度优先搜索算法&quot;&gt;&lt;/a&gt;第八节 从全排列到深度优先搜索算法&lt;/h1&gt;&lt;h2 id=&quot;全排列&quot;&gt;
    
    </summary>
    
    
      <category term="ACM" scheme="http://www.z16388.top/tags/ACM/"/>
    
      <category term="算法" scheme="http://www.z16388.top/tags/%E7%AE%97%E6%B3%95/"/>
    
      <category term="ACM教程" scheme="http://www.z16388.top/tags/ACM%E6%95%99%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>【ACM教程】2.5数学简单问题</title>
    <link href="http://www.z16388.top/2017/03/22/%E3%80%90ACM%E6%95%99%E7%A8%8B%E3%80%912-5%E6%95%B0%E5%AD%A6%E7%AE%80%E5%8D%95%E9%97%AE%E9%A2%98/"/>
    <id>http://www.z16388.top/2017/03/22/【ACM教程】2-5数学简单问题/</id>
    <published>2017-03-22T07:25:01.000Z</published>
    <updated>2017-04-13T13:25:15.894Z</updated>
    
    <content type="html"><![CDATA[<h1 id="第五节-数学简单问题"><a href="#第五节-数学简单问题" class="headerlink" title="第五节 数学简单问题"></a>第五节 数学简单问题</h1><p>&emsp;&emsp;竞赛中的很多题目会考到数学相关的知识，在这一节，我们会挑出一些简单的问题集中讲解。</p>
<h2 id="最大公约数-最小公倍数"><a href="#最大公约数-最小公倍数" class="headerlink" title="最大公约数/最小公倍数"></a>最大公约数/最小公倍数</h2><p>&emsp;&emsp;首先我们要介绍一个算法，欧几里德算法。欧几里得是著名的古希腊数学家，被称为“几何学之父”，代表作为《几何原本》。</p>
<p>&emsp;&emsp;欧几里得算法又称辗转相除算法，定理如下：两个整数的最大公约数等于其中较小的那个数和两数相除余数的最大公约数。（最大公约数缩写为gcd）在这里就不作证明了，直接给出代码：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">gcd</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> b)</span>  <span class="comment">//最大公约数</span></span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">if</span>(b==<span class="number">0</span>) <span class="keyword">return</span> a;</div><div class="line">	<span class="keyword">else</span> <span class="keyword">return</span> gcd(b,a%b);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">lcm</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> b)</span>  <span class="comment">//最小公倍数</span></span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">return</span> a/gcd(a,b)*b;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="判断素数"><a href="#判断素数" class="headerlink" title="判断素数"></a>判断素数</h2><p>&emsp;&emsp;什么是素数呢？素数是大于等于2的，只有1和他本身能够整除他的数。要去判断一个数n是否是素数，只要从2到sqrt(n)依次判断即可，代码如下：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">su</span><span class="params">(<span class="keyword">int</span> b)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>;i&lt;=(<span class="keyword">int</span>)<span class="built_in">sqrt</span>(b);i++) &#123;</div><div class="line">        <span class="keyword">if</span>(b%i==<span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="排列组合打表"><a href="#排列组合打表" class="headerlink" title="排列组合打表"></a>排列组合打表</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">int</span> c[N][N];</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">com</span><span class="params">()</span> </span>&#123;</div><div class="line">	<span class="built_in">memset</span>(c,<span class="number">0</span>,<span class="keyword">sizeof</span>(c));</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;N;i++) &#123;</div><div class="line">		c[i][<span class="number">0</span>]=c[i][i]=<span class="number">1</span>;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;i;j++) &#123;</div><div class="line">			c[i][j]=c[i<span class="number">-1</span>][j]+c[i<span class="number">-1</span>][j<span class="number">-1</span>];</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="快速幂"><a href="#快速幂" class="headerlink" title="快速幂"></a>快速幂</h2><p>&emsp;&emsp;求a的b次幂，我们可以直接使用for循环去做。但是当b很大的时候，就会花费很多时间，这时候需要使用快速幂算法。</p>
<p>&emsp;&emsp;下面我们就以求a^11为例，介绍一下快速幂算法。</p>
<ol>
<li>将11转化为二进制——1011</li>
<li>分解：11=1*2^3+0*2^2+1*2^1+1*2^0</li>
<li>将a^11转化为a^(2^3)*a^(2^1)*a^(2^0)</li>
</ol>
<p>&emsp;&emsp;代码如下：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">Fast</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> n)</span> </span>&#123;</div><div class="line">	<span class="keyword">int</span> tem=x,ans=<span class="number">1</span>;</div><div class="line">	<span class="keyword">while</span>(n) &#123;</div><div class="line">		<span class="keyword">if</span>(n%<span class="number">2</span>==<span class="number">1</span>) ans*=tem;</div><div class="line">		tem*=tem;</div><div class="line">		n&gt;&gt;=<span class="number">1</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> ans;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="快速幂取模"><a href="#快速幂取模" class="headerlink" title="快速幂取模"></a>快速幂取模</h2><p>&emsp;&emsp;公式：a*b%c=((a%c)*b)%c&emsp;&emsp;(a+b)%c=(a%c+b%c)%c</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">pow</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> x)</span> </span>&#123;</div><div class="line">	<span class="keyword">int</span> ans=<span class="number">1</span>,temp=a%p;</div><div class="line">	<span class="keyword">while</span>(x) &#123;</div><div class="line">		<span class="keyword">if</span>(x&amp;<span class="number">1</span>) ans=((<span class="keyword">long</span> <span class="keyword">long</span>)ans*temp)%p;</div><div class="line">		temp=((<span class="keyword">long</span> <span class="keyword">long</span>)temp*temp)%p;</div><div class="line">		x&gt;&gt;=<span class="number">1</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> ans;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="十进制转换为x进制"><a href="#十进制转换为x进制" class="headerlink" title="十进制转换为x进制"></a>十进制转换为x进制</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="built_in">string</span> <span class="title">trans</span><span class="params">(<span class="keyword">int</span> num,<span class="keyword">int</span> base)</span> </span>&#123;</div><div class="line">	<span class="built_in">string</span> str;</div><div class="line">	<span class="keyword">while</span>(num&gt;<span class="number">0</span>) &#123;</div><div class="line">		<span class="keyword">if</span>(num%base&lt;<span class="number">10</span>) &#123;</div><div class="line">			str+=num%base+<span class="string">'0'</span>;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">else</span> &#123;</div><div class="line">			str+=num%base<span class="number">-10</span>+<span class="string">'A'</span>;</div><div class="line">		&#125;</div><div class="line">		num=num/base;</div><div class="line">	&#125;</div><div class="line">	reverse(str.begin(),str.end());</div><div class="line">	<span class="keyword">return</span> str;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="常用的数学公式"><a href="#常用的数学公式" class="headerlink" title="常用的数学公式"></a>常用的数学公式</h2><p>等差数列求和公式：</p>
<p>Sn=n*a1+n(n-1)d/2<br>Sn=n(a1+an)/2</p>
<p>等比数列求和公式：</p>
<p>Sn=a1(1-q^n)/(1-q)</p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;第五节-数学简单问题&quot;&gt;&lt;a href=&quot;#第五节-数学简单问题&quot; class=&quot;headerlink&quot; title=&quot;第五节 数学简单问题&quot;&gt;&lt;/a&gt;第五节 数学简单问题&lt;/h1&gt;&lt;p&gt;&amp;emsp;&amp;emsp;竞赛中的很多题目会考到数学相关的知识，在这一节，我们
    
    </summary>
    
    
      <category term="ACM" scheme="http://www.z16388.top/tags/ACM/"/>
    
      <category term="算法" scheme="http://www.z16388.top/tags/%E7%AE%97%E6%B3%95/"/>
    
      <category term="ACM教程" scheme="http://www.z16388.top/tags/ACM%E6%95%99%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>第六届蓝桥杯C/C++省赛B组题目详解</title>
    <link href="http://www.z16388.top/2017/03/21/lanqiao6/"/>
    <id>http://www.z16388.top/2017/03/21/lanqiao6/</id>
    <published>2017-03-21T11:57:34.000Z</published>
    <updated>2017-04-13T13:25:15.864Z</updated>
    
    <content type="html"><![CDATA[<h2 id="第一题-奖券数目"><a href="#第一题-奖券数目" class="headerlink" title="第一题 奖券数目"></a>第一题 奖券数目</h2><blockquote>
<p>有些人很迷信数字，比如带“4”的数字，认为和“死”谐音，就觉得不吉利。<br>虽然这些说法纯属无稽之谈，但有时还要迎合大众的需求。某抽奖活动的奖券号码是5位数（10000-99999），要求其中不要出现带“4”的号码，主办单位请你计算一下，如果任何两张奖券不重号，最多可发出奖券多少张。<br>请提交该数字（一个整数），不要写任何多余的内容或说明性文字。</p>
</blockquote>
<p>&emsp;&emsp;这道题虽然可以使用穷举法去做，但是其实是一道“稿纸题”。分析每一位上面数的可能性，直接使用8*9*9*9*9即可计算出来。最终答案为：<code>52488</code></p>
<h2 id="第二题-星系炸弹"><a href="#第二题-星系炸弹" class="headerlink" title="第二题 星系炸弹"></a>第二题 星系炸弹</h2><blockquote>
<p>在X星系的广袤空间中漂浮着许多X星人造“炸弹”，用来作为宇宙中的路标。<br>每个炸弹都可以设定多少天之后爆炸。<br>比如：阿尔法炸弹2015年1月1日放置，定时为15天，则它在2015年1月16日爆炸。<br>有一个贝塔炸弹，2014年11月9日放置，定时为1000天，请你计算它爆炸的准确日期。<br>请填写该日期，格式为yyyy-mm-dd  即4位年份2位月份2位日期。比如：2015-02-19</p>
</blockquote>
<p>&emsp;&emsp;这是一道简单的日期计算问题。掌握好每个月的天数，然后计算。当然，也可以是一道稿纸题。</p>
<p>&emsp;&emsp;最终答案为：<code>2017-08-05</code></p>
<h2 id="第三题-三羊献瑞"><a href="#第三题-三羊献瑞" class="headerlink" title="第三题 三羊献瑞"></a>第三题 三羊献瑞</h2><blockquote>
<p>观察下面的加法算式：<br>       祥 瑞生 辉</p>
<ul>
<li>三羊 献 瑞<br>-——————<br>三 羊 生 瑞 气<br>其中，相同的汉字代表相同的数字，不同的汉字代表不同的数字。<br>请你填写“三羊献瑞”所代表的4位数字（答案唯一），不要填写任何多余内容。</li>
</ul>
</blockquote>
<p>&emsp;&emsp;经典的蓝桥题目，直接暴力枚举就可以。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line"></div><div class="line"><span class="comment">/*</span></div><div class="line">    int xiang,rui,sheng,hui;</div><div class="line">    int san,yang,xian,rui;</div><div class="line">    int san,yang,sheng,rui,qi;</div><div class="line">*/</div><div class="line"></div><div class="line">    <span class="keyword">int</span> xiang,rui,sheng,hui;</div><div class="line">    <span class="keyword">int</span> san,yang,xian;</div><div class="line">    <span class="keyword">int</span> qi;</div><div class="line"></div><div class="line">    <span class="keyword">int</span> a,b,c;</div><div class="line"></div><div class="line">    <span class="keyword">for</span>(xiang=<span class="number">1</span>;xiang&lt;=<span class="number">9</span>;++xiang)&#123;</div><div class="line">        <span class="keyword">for</span>(rui=<span class="number">0</span>;rui&lt;=<span class="number">9</span>;++rui)&#123;</div><div class="line">            <span class="keyword">if</span>(rui==xiang)<span class="keyword">continue</span>;</div><div class="line">            <span class="keyword">for</span>(sheng=<span class="number">0</span>;sheng&lt;=<span class="number">9</span>;++sheng)&#123;</div><div class="line">                <span class="keyword">if</span>(sheng==xiang||sheng==rui)<span class="keyword">continue</span>;</div><div class="line">                <span class="keyword">for</span>(hui=<span class="number">0</span>;hui&lt;=<span class="number">9</span>;++hui)&#123;</div><div class="line">                    <span class="keyword">if</span>(hui==xiang||hui==rui||hui==sheng)<span class="keyword">continue</span>;</div><div class="line">                    <span class="keyword">for</span>(san=<span class="number">1</span>;san&lt;=<span class="number">9</span>;++san)&#123;</div><div class="line">                        <span class="keyword">if</span>(san==xiang||san==rui||san==sheng||san==hui)<span class="keyword">continue</span>;</div><div class="line">                        <span class="keyword">for</span>(yang=<span class="number">0</span>;yang&lt;=<span class="number">9</span>;++yang)&#123;</div><div class="line">                            <span class="keyword">if</span>(yang==xiang||yang==rui||yang==sheng||yang==hui||yang==san)<span class="keyword">continue</span>;</div><div class="line">                            <span class="keyword">for</span>(xian=<span class="number">0</span>;xian&lt;=<span class="number">9</span>;++xian)&#123;</div><div class="line">                                <span class="keyword">if</span>(xian==xiang||xian==rui||xian==sheng||xian==hui||xian==san||xian==yang)<span class="keyword">continue</span>;</div><div class="line">                                <span class="keyword">for</span>(qi=<span class="number">0</span>;qi&lt;=<span class="number">9</span>;++qi)&#123;</div><div class="line">                                    <span class="keyword">if</span>(qi==xiang||qi==rui||qi==sheng||qi==hui||qi==san||qi==yang||qi==xian)<span class="keyword">continue</span>;</div><div class="line"></div><div class="line">                                    a=xiang*<span class="number">1000</span>+rui*<span class="number">100</span>+sheng*<span class="number">10</span>+hui;</div><div class="line">                                    b=san*<span class="number">1000</span>+yang*<span class="number">100</span>+xian*<span class="number">10</span>+rui;</div><div class="line">                                    c=san*<span class="number">10000</span>+yang*<span class="number">1000</span>+sheng*<span class="number">100</span>+rui*<span class="number">10</span>+qi;</div><div class="line">                                    <span class="keyword">if</span>(a+b==c)&#123;</div><div class="line">                                        <span class="comment">//printf("%d+%d=%d\n",a,b,c);</span></div><div class="line">                                        <span class="built_in">printf</span>(<span class="string">"%d %d %d %d\n"</span>,san,yang,xian,rui);</div><div class="line">                                    &#125;</div><div class="line">                                &#125;</div><div class="line">                            &#125;</div><div class="line">                        &#125;</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="第四题-格子中输出"><a href="#第四题-格子中输出" class="headerlink" title="第四题 格子中输出"></a>第四题 格子中输出</h2><blockquote>
<p>格子中输出<br>StringInGrid函数会在一个指定大小的格子中打印指定的字符串。<br>要求字符串在水平、垂直两个方向上都居中。<br>如果字符串太长，就截断。<br>如果不能恰好居中，可以稍稍偏左或者偏上一点。<br>下面的程序实现这个逻辑，请填写划线部分缺少的代码。<br>对于题目中数据，应该输出：<br>+——————+<br>|&emsp;&emsp;&emsp;&emsp;&emsp;|<br>|     abcd1234     |<br>|&emsp;&emsp;&emsp;&emsp;&emsp;|<br>|&emsp;&emsp;&emsp;&emsp;&emsp;|<br>+——————+</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">StringInGrid</span><span class="params">(<span class="keyword">int</span> width, <span class="keyword">int</span> height, <span class="keyword">const</span> <span class="keyword">char</span>* s)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> i,k;</div><div class="line">    <span class="keyword">char</span> buf[<span class="number">1000</span>];</div><div class="line">    <span class="built_in">strcpy</span>(buf, s);</div><div class="line">    <span class="keyword">if</span>(<span class="built_in">strlen</span>(s)&gt;width<span class="number">-2</span>) buf[width<span class="number">-2</span>]=<span class="number">0</span>;</div><div class="line">    </div><div class="line">    <span class="built_in">printf</span>(<span class="string">"+"</span>);</div><div class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;width<span class="number">-2</span>;i++) <span class="built_in">printf</span>(<span class="string">"-"</span>);</div><div class="line">    <span class="built_in">printf</span>(<span class="string">"+\n"</span>);</div><div class="line">    </div><div class="line">    <span class="keyword">for</span>(k=<span class="number">1</span>; k&lt;(height<span class="number">-1</span>)/<span class="number">2</span>;k++)&#123;</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"|"</span>);</div><div class="line">        <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;width<span class="number">-2</span>;i++) <span class="built_in">printf</span>(<span class="string">" "</span>);</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"|\n"</span>);</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="built_in">printf</span>(<span class="string">"|"</span>);</div><div class="line">    </div><div class="line">    <span class="built_in">printf</span>(<span class="string">"%*s%s%*s"</span>,<span class="number">_____________________________________________</span>);  <span class="comment">//填空</span></div><div class="line">              </div><div class="line">    <span class="built_in">printf</span>(<span class="string">"|\n"</span>);</div><div class="line">    </div><div class="line">    <span class="keyword">for</span>(k=(height<span class="number">-1</span>)/<span class="number">2</span>+<span class="number">1</span>; k&lt;height<span class="number">-1</span>; k++)&#123;</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"|"</span>);</div><div class="line">        <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;width<span class="number">-2</span>;i++) <span class="built_in">printf</span>(<span class="string">" "</span>);</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"|\n"</span>);</div><div class="line">    &#125;    </div><div class="line">    </div><div class="line">    <span class="built_in">printf</span>(<span class="string">"+"</span>);</div><div class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;width<span class="number">-2</span>;i++) <span class="built_in">printf</span>(<span class="string">"-"</span>);</div><div class="line">    <span class="built_in">printf</span>(<span class="string">"+\n"</span>);    </div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    StringInGrid(<span class="number">20</span>,<span class="number">6</span>,<span class="string">"abcd1234"</span>);</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>答案是：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">(width-<span class="built_in">strlen</span>(buf)<span class="number">-2</span>)/<span class="number">2</span>,<span class="string">""</span>,buf,(width-<span class="built_in">strlen</span>(buf)<span class="number">-2</span>+<span class="number">1</span>)/<span class="number">2</span>,<span class="string">""</span></div></pre></td></tr></table></figure>
<p>&emsp;&emsp;C语言语法考题，太过于变态，基本没有做出来的。这道题不必深究。</p>
<h2 id="第五题-九数组分数"><a href="#第五题-九数组分数" class="headerlink" title="第五题 九数组分数"></a>第五题 九数组分数</h2><blockquote>
<p>九数组分数<br>1,2,3…9 这九个数字组成一个分数，其值恰好为1/3，如何组法？<br>下面的程序实现了该功能，请填写划线部分缺失的代码。</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">(<span class="keyword">int</span> x[])</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> a = x[<span class="number">0</span>]*<span class="number">1000</span> + x[<span class="number">1</span>]*<span class="number">100</span> + x[<span class="number">2</span>]*<span class="number">10</span> + x[<span class="number">3</span>];</div><div class="line">    <span class="keyword">int</span> b = x[<span class="number">4</span>]*<span class="number">10000</span> + x[<span class="number">5</span>]*<span class="number">1000</span> + x[<span class="number">6</span>]*<span class="number">100</span> + x[<span class="number">7</span>]*<span class="number">10</span> + x[<span class="number">8</span>];</div><div class="line">    </div><div class="line">    <span class="keyword">if</span>(a*<span class="number">3</span>==b) <span class="built_in">printf</span>(<span class="string">"%d / %d\n"</span>, a, b);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">f</span><span class="params">(<span class="keyword">int</span> x[], <span class="keyword">int</span> k)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> i,t;</div><div class="line">    <span class="keyword">if</span>(k&gt;=<span class="number">9</span>)&#123;</div><div class="line">        test(x);</div><div class="line">        <span class="keyword">return</span>;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="keyword">for</span>(i=k; i&lt;<span class="number">9</span>; i++)&#123;</div><div class="line">        &#123;t=x[k]; x[k]=x[i]; x[i]=t;&#125;</div><div class="line">        f(x,k+<span class="number">1</span>);</div><div class="line">        <span class="number">_____________________________________________</span> <span class="comment">// 填空处</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">    </div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> x[] = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>&#125;;</div><div class="line">    f(x,<span class="number">0</span>);    </div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>&emsp;&emsp;水题，答案：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&#123;t=x[k]; x[k]=x[i]; x[i]=t;&#125;</div></pre></td></tr></table></figure>
<h2 id="第六题-加法变乘法"><a href="#第六题-加法变乘法" class="headerlink" title="第六题 加法变乘法"></a>第六题 加法变乘法</h2><blockquote>
<p>我们都知道：1+2+3+… + 49 = 1225<br>现在要求你把其中两个不相邻的加号变成乘号，使得结果为2015<br>比如：<br>1+2+3+…+10*11+12+…+27*28+29+…+49 =2015<br>就是符合要求的答案。<br>请你寻找另外一个可能的答案，并把位置靠前的那个乘号左边的数字提交（对于示例，就是提交10）。</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">int</span> i,j;</div><div class="line">    <span class="keyword">int</span> a,b;</div><div class="line"></div><div class="line">    <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=<span class="number">49</span>;++i)&#123;</div><div class="line">        <span class="keyword">for</span>(j=i+<span class="number">2</span>;j&lt;=<span class="number">49</span>;++j)&#123;</div><div class="line">            a=<span class="number">1225</span>-(i+i+<span class="number">1</span>)-(j+j+<span class="number">1</span>);</div><div class="line">            b=<span class="number">2015</span>-(i*(i+<span class="number">1</span>))-(j*(j+<span class="number">1</span>));</div><div class="line">            <span class="keyword">if</span>(a==b)&#123;</div><div class="line">                <span class="built_in">printf</span>(<span class="string">"i=%d,j=%d\n"</span>,i,j);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>&emsp;&emsp;暴力枚举，枚举所有的可能的两个位置，用1225和2015分别减去这两个位置的值，看看是否相等。</p>
<h2 id="第七题-牌型种数"><a href="#第七题-牌型种数" class="headerlink" title="第七题 牌型种数"></a>第七题 牌型种数</h2><blockquote>
<p>小明被劫持到X赌城，被迫与其他3人玩牌。<br>一副扑克牌（去掉大小王牌，共52张），均匀发给4个人，每个人13张。<br>这时，小明脑子里突然冒出一个问题：<br>如果不考虑花色，只考虑点数，也不考虑自己得到的牌的先后顺序，自己手里能拿到的初始牌型组合一共有多少种呢？</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">int</span> a1,a2,a3,a4,a5,a6,a7,a8,a9,a10,aJ,aQ,aK;</div><div class="line">    <span class="keyword">int</span> sum=<span class="number">0</span>;</div><div class="line"></div><div class="line">    <span class="keyword">for</span>(a1=<span class="number">0</span>;a1&lt;=<span class="number">4</span>;++a1)&#123;</div><div class="line">        <span class="keyword">for</span>(a2=<span class="number">0</span>;a2&lt;=<span class="number">4</span>;++a2)&#123;</div><div class="line">            <span class="keyword">for</span>(a3=<span class="number">0</span>;a3&lt;=<span class="number">4</span>;++a3)&#123;</div><div class="line">                <span class="keyword">for</span>(a4=<span class="number">0</span>;a4&lt;=<span class="number">4</span>;++a4)&#123;</div><div class="line">                    <span class="keyword">for</span>(a5=<span class="number">0</span>;a5&lt;=<span class="number">4</span>;++a5)&#123;</div><div class="line">                        <span class="keyword">for</span>(a6=<span class="number">0</span>;a6&lt;=<span class="number">4</span>;++a6)&#123;</div><div class="line">                            <span class="keyword">for</span>(a7=<span class="number">0</span>;a7&lt;=<span class="number">4</span>;++a7)&#123;</div><div class="line">                                <span class="keyword">for</span>(a8=<span class="number">0</span>;a8&lt;=<span class="number">4</span>;++a8)&#123;</div><div class="line">                                    <span class="keyword">for</span>(a9=<span class="number">0</span>;a9&lt;=<span class="number">4</span>;++a9)&#123;</div><div class="line">                                        <span class="keyword">for</span>(a10=<span class="number">0</span>;a10&lt;=<span class="number">4</span>;++a10)&#123;</div><div class="line">                                            <span class="keyword">for</span>(aJ=<span class="number">0</span>;aJ&lt;=<span class="number">4</span>;++aJ)&#123;</div><div class="line">                                                <span class="keyword">for</span>(aQ=<span class="number">0</span>;aQ&lt;=<span class="number">4</span>;++aQ)&#123;</div><div class="line">                                                    <span class="keyword">for</span>(aK=<span class="number">0</span>;aK&lt;=<span class="number">4</span>;++aK)&#123;</div><div class="line">                                                        <span class="keyword">if</span>(a1+a2+a3+a4+a5+a6+a7+a8+a9+a10+aJ+aQ+aK==<span class="number">13</span>)&#123;</div><div class="line">                                                            ++sum;</div><div class="line">                                                        &#125;</div><div class="line">                                                    &#125;</div><div class="line">                                                &#125;</div><div class="line">                                            &#125;</div><div class="line">                                        &#125;</div><div class="line">                                    &#125;</div><div class="line">                                &#125;</div><div class="line">                            &#125;</div><div class="line">                        &#125;</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,sum);</div><div class="line"></div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>&emsp;&emsp;当然，我们也可以用dfs来解决这道题。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">int</span> sum;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> cur,<span class="keyword">int</span> tol)</span></span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">if</span>(tol&gt;<span class="number">13</span>) <span class="keyword">return</span>;</div><div class="line">    <span class="keyword">if</span>(cur==<span class="number">14</span>)&#123;<span class="comment">//13种牌都拿完了</span></div><div class="line">        <span class="keyword">if</span>(tol==<span class="number">13</span>)&#123;<span class="comment">//手里13张牌了</span></div><div class="line">            ++sum;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">int</span> i;</div><div class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;=<span class="number">4</span>;++i)&#123;</div><div class="line">        dfs(cur+<span class="number">1</span>,tol+i);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line"></div><div class="line">    sum=<span class="number">0</span>;</div><div class="line">    dfs(<span class="number">1</span>,<span class="number">0</span>);<span class="comment">//从第1张牌开始选，当前手中有0张</span></div><div class="line"></div><div class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,sum);</div><div class="line"></div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="第八题-移动距离"><a href="#第八题-移动距离" class="headerlink" title="第八题 移动距离"></a>第八题 移动距离</h2><blockquote>
<p>X星球居民小区的楼房全是一样的，并且按矩阵样式排列。其楼房的编号为1,2,3…<br>当排满一行时，从下一行相邻的楼往反方向排号。<br>比如：当小区排号宽度为6时，开始情形如下：<br>  1   2   3  4 5  6<br>12 11 10 9 8  7<br>13 14 15 …..<br>我们的问题是：已知了两个楼号m和n，需要求出它们之间的最短移动距离（不能斜线方向移动）<br>输入为3个整数w m n，空格分开，都在1到10000范围内<br>w为排号宽度，m,n为待计算的楼号。<br>要求输出一个整数，表示m n两楼间最短移动距离。<br>例如：<br>用户输入：<br>6 8 2<br>则，程序应该输出：<br>4<br>再例如：<br>用户输入：<br>4 7 20<br>则，程序应该输出：<br>5<br>资源约定：<br>峰值内存消耗 <256m cpu消耗="" <="" 1ms="" 请严格按要求输出，不要画蛇添足地打印类似：“请您输入...”="" 的多余内容。="" 所有代码放在同一个源文件中，调试通过后，拷贝提交该源码。="" 注意:="" main函数需要返回0="" 只使用ansi="" c="" ansi="" c++="" 标准，不要调用依赖于编译环境或操作系统的特殊函数。="" 所有依赖的函数必须明确地在源文件中="" #include<xxx="">， 不能通过工程设置而省略常用头文件。<br>提交时，注意选择所期望的编译器类型。</256m></p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">int</span> w,m,n;</div><div class="line">    <span class="keyword">int</span> x1,y1;</div><div class="line">    <span class="keyword">int</span> x2,y2;</div><div class="line"></div><div class="line">    <span class="keyword">while</span>(~<span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;w,&amp;m,&amp;n))&#123;</div><div class="line">        x1=(m<span class="number">-1</span>)/w;</div><div class="line">        y1=(m<span class="number">-1</span>)%w;</div><div class="line">        <span class="keyword">if</span>(x1%<span class="number">2</span>!=<span class="number">0</span>)&#123;</div><div class="line">            y1=w<span class="number">-1</span>-y1;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        x2=(n<span class="number">-1</span>)/w;</div><div class="line">        y2=(n<span class="number">-1</span>)%w;</div><div class="line">        <span class="keyword">if</span>(x2%<span class="number">2</span>!=<span class="number">0</span>)&#123;</div><div class="line">            y2=w<span class="number">-1</span>-y2;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,<span class="built_in">abs</span>(x1-x2)+<span class="built_in">abs</span>(y1-y2));</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="第九题-垒骰子"><a href="#第九题-垒骰子" class="headerlink" title="第九题 垒骰子"></a>第九题 垒骰子</h2><blockquote>
<p>赌圣atm晚年迷恋上了垒骰子，就是把骰子一个垒在另一个上边，不能歪歪扭扭，要垒成方柱体。<br>经过长期观察，atm 发现了稳定骰子的奥秘：有些数字的面贴着会互相排斥！<br>我们先来规范一下骰子：1 的对面是 4，2 的对面是 5，3 的对面是 6。<br>假设有 m 组互斥现象，每组中的那两个数字的面紧贴在一起，骰子就不能稳定的垒起来。<br>atm想计算一下有多少种不同的可能的垒骰子方式。<br>两种垒骰子方式相同，当且仅当这两种方式中对应高度的骰子的对应数字的朝向都相同。<br>由于方案数可能过多，请输出模10^9 + 7 的结果。<br>不要小看了 atm 的骰子数量哦～<br>「输入格式」<br>第一行两个整数 n m<br>n表示骰子数目<br>接下来 m 行，每行两个整数 a b ，表示 a 和 b 数字不能紧贴在一起。<br>「输出格式」<br>一行一个数，表示答案模10^9 + 7 的结果。<br>「样例输入」<br>2 1<br>1 2<br>「样例输出」<br>544<br>「数据范围」<br>对于 30% 的数据：n &lt;= 5<br>对于 60% 的数据：n &lt;= 100<br>对于 100% 的数据：0 &lt; n &lt;= 10^9, m &lt;= 36<br>资源约定：<br>峰值内存消耗 <256m cpu消耗="" <="" 2000ms="" 请严格按要求输出，不要画蛇添足地打印类似：“请您输入...”="" 的多余内容。="" 所有代码放在同一个源文件中，调试通过后，拷贝提交该源码。="" 注意:="" main函数需要返回0="" 只使用ansi="" c="" ansi="" c++="" 标准，不要调用依赖于编译环境或操作系统的特殊函数。="" 所有依赖的函数必须明确地在源文件中="" #include<xxx="">， 不能通过工程设置而省略常用头文件。<br>提交时，注意选择所期望的编译器类型。</256m></p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> MOD 1000000007</span></div><div class="line"></div><div class="line"><span class="keyword">int</span> flag[<span class="number">7</span>][<span class="number">7</span>];<span class="comment">//-1可以相邻，0不能相邻</span></div><div class="line"><span class="keyword">long</span> <span class="keyword">long</span> dp[<span class="number">2</span>][<span class="number">7</span>];<span class="comment">//滚动数组，dp[i][j]代表高度为i，顶面骰子的顶面点数为j的叠骰子方案数</span></div><div class="line"><span class="keyword">int</span> convert[<span class="number">7</span>]=&#123;<span class="number">0</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">    </div><div class="line">    <span class="keyword">int</span> n,m;</div><div class="line">    <span class="keyword">int</span> a,b;</div><div class="line">    <span class="keyword">int</span> i,j,k;</div><div class="line">    <span class="keyword">int</span> e;<span class="comment">//滚动标志，就2个交换的话这样滚动（e=1-e）应该比%快点吧（其实加减法和%速度应该差不多少吧。）</span></div><div class="line">    <span class="keyword">long</span> <span class="keyword">long</span> sum;</div><div class="line">    </div><div class="line">    <span class="keyword">while</span>(~<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;m))&#123;</div><div class="line">        </div><div class="line">        <span class="built_in">memset</span>(flag,<span class="number">-1</span>,<span class="keyword">sizeof</span>(flag));</div><div class="line">        </div><div class="line">        <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;m;++i)&#123;</div><div class="line">            <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;a,&amp;b);</div><div class="line">            flag[a][b]=<span class="number">0</span>;</div><div class="line">            flag[b][a]=<span class="number">0</span>;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        e=<span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;<span class="number">7</span>;++i)&#123;</div><div class="line">            dp[e][i]=<span class="number">4</span>;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        <span class="comment">//骰子4面转动，乘以4</span></div><div class="line">        </div><div class="line">        <span class="keyword">for</span>(i=<span class="number">2</span>;i&lt;=n;++i)&#123;</div><div class="line">            e=<span class="number">1</span>-e;<span class="comment">//滚动数组</span></div><div class="line">            </div><div class="line">            <span class="keyword">for</span>(j=<span class="number">1</span>;j&lt;<span class="number">7</span>;++j)&#123;</div><div class="line">                dp[e][j]=<span class="number">0</span>;</div><div class="line">                <span class="keyword">for</span>(k=<span class="number">1</span>;k&lt;<span class="number">7</span>;++k)&#123;</div><div class="line">                    <span class="keyword">if</span>(flag[k][convert[j]]==<span class="number">-1</span>)&#123;</div><div class="line">                        dp[e][j]=(dp[e][j]+dp[<span class="number">1</span>-e][k]*<span class="number">4</span>)%MOD;</div><div class="line">                    &#125;    </div><div class="line">                &#125;    </div><div class="line">            &#125;</div><div class="line">            </div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        sum=<span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;<span class="number">7</span>;++i)&#123;</div><div class="line">            sum=(sum+dp[e][i])%MOD;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>,sum);</div><div class="line">    &#125;    </div><div class="line">    </div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="第十题-生命之树"><a href="#第十题-生命之树" class="headerlink" title="第十题 生命之树"></a>第十题 生命之树</h2><blockquote>
<p>在X森林里，上帝创建了生命之树。<br>他给每棵树的每个节点（叶子也称为一个节点）上，都标了一个整数，代表这个点的和谐值。<br>上帝要在这棵树内选出一个非空节点集S，使得对于S中的任意两个点a,b，都存在一个点列 {a, v1, v2, …, vk, b} 使得这个点列中的每个点都是S里面的元素，且序列中相邻两个点间有一条边相连。<br>在这个前提下，上帝要使得S中的点所对应的整数的和尽量大。<br>这个最大的和就是上帝给生命之树的评分。<br>经过atm的努力，他已经知道了上帝给每棵树上每个节点上的整数。但是由于 atm 不擅长计算，他不知道怎样有效的求评分。他需要你为他写一个程序来计算一棵树的分数。<br>「输入格式」<br>第一行一个整数 n 表示这棵树有 n 个节点。<br>第二行 n 个整数，依次表示每个节点的评分。<br>接下来 n-1 行，每行 2 个整数 u, v，表示存在一条 u 到 v 的边。由于这是一棵树，所以是不存在环的。<br>「输出格式」<br>输出一行一个数，表示上帝给这棵树的分数。<br>「样例输入」<br>5<br>1 -2 -3 4 5<br>4 2<br>3 1<br>1 2<br>2 5<br>「样例输出」<br>8<br>「数据范围」<br>对于 30% 的数据，n &lt;= 10<br>对于 100% 的数据，0 &lt; n &lt;= 10^5, 每个节点的评分的绝对值不超过 10^6 。<br>资源约定：<br>峰值内存消耗 &lt; 256M<br>CPU消耗 &lt; 3000ms<br>请严格按要求输出，不要画蛇添足地打印类似：“请您输入…” 的多余内容。<br>所有代码放在同一个源文件中，调试通过后，拷贝提交该源码。<br>注意: main函数需要返回0<br>注意: 只使用ANSI C/ANSI C++ 标准，不要调用依赖于编译环境或操作系统的特殊函数。<br>注意: 所有依赖的函数必须明确地在源文件中 #include <xxx>， 不能通过工程设置而省略常用头文件。<br>提交时，注意选择所期望的编译器类型。</xxx></p>
</blockquote>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;第一题-奖券数目&quot;&gt;&lt;a href=&quot;#第一题-奖券数目&quot; class=&quot;headerlink&quot; title=&quot;第一题 奖券数目&quot;&gt;&lt;/a&gt;第一题 奖券数目&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;有些人很迷信数字，比如带“4”的数字，认为和“死”谐音，就觉得不吉
    
    </summary>
    
    
      <category term="蓝桥杯" scheme="http://www.z16388.top/tags/%E8%93%9D%E6%A1%A5%E6%9D%AF/"/>
    
  </entry>
  
  <entry>
    <title>GJB5369考点笔记</title>
    <link href="http://www.z16388.top/2017/03/18/GJB5369%E8%80%83%E7%82%B9%E7%AC%94%E8%AE%B0/"/>
    <id>http://www.z16388.top/2017/03/18/GJB5369考点笔记/</id>
    <published>2017-03-18T02:35:42.000Z</published>
    <updated>2017-04-13T13:25:20.921Z</updated>
    
    <content type="html"><![CDATA[<h1 id="启用规则"><a href="#启用规则" class="headerlink" title="启用规则"></a>启用规则</h1><ol>
<li>禁止使用嵌套的注释</li>
<li>建议不适用单行的注释“//”</li>
<li>禁止使用不适合的循环变量类型（循环变量类型应为int）</li>
<li>循环变量必须是局部声明的</li>
<li>谨慎使用无限循环语句</li>
<li>避免在循环中使用break语句</li>
<li>谨慎使用无法控制的循环条件</li>
<li>禁止对指针变量使用强制类型转换赋值</li>
<li>谨慎使用其他类型变量给指针赋值</li>
<li>避免使用不必要的类型转换</li>
<li>枚举元素的初始化必须完整</li>
<li>结构体变量初始化的类型必须一致</li>
<li>结构体变量初始化的嵌套结构必须与定义的相一致</li>
<li>变量使用前必须被赋过值</li>
<li>禁止对实数类型的量做是否相等的比较</li>
<li>禁止逻辑判别的表达式不是逻辑表达式</li>
<li>switch语句中的表达式禁止是逻辑表达式</li>
<li>建议逻辑表达式采用显式的表达</li>
<li>禁止枚举类型中的元素名与已有的变量名同名</li>
<li>禁止局部变量与全局变量同名</li>
<li>禁止形参名与全局变量名同名</li>
<li>禁止形参名与类型或标识符同名</li>
<li>禁止在内部块中重定义已有的变量名</li>
<li>禁止复杂表达式中使用volatile类型的变量</li>
<li>在源程序中谨慎使用非标准字符</li>
<li>禁止使用预处理操作符#和##</li>
<li>过程名禁止被重用</li>
<li>禁止过程或函数中的参数表为空</li>
<li>禁止在同一个宏中使用多个#或##</li>
<li>禁止定义不像函数的宏</li>
<li>禁止在宏中包含不允许的项</li>
<li>禁止重新定义保留字</li>
<li>字符型变量必须明确定义是有符号还是无符号</li>
<li>禁止对一个名字重新定义</li>
<li>用typedef自定义的类型禁止被重定义</li>
<li>禁止在同一个文件中有#if而没有#endif</li>
<li>禁止数组没有边界限定</li>
<li>标号名禁止被重用</li>
<li>禁止在#include&lt;&gt;中使用绝对的路径名</li>
<li>禁止结构体声明不完整</li>
<li>禁止结构体定义中含有空域</li>
<li>禁止声明多重标号</li>
<li>在过程声明中必须对参数说明</li>
<li>禁止过程参数只有类型没有标识符</li>
<li>禁止在过程参数表中使用省略号</li>
<li>禁止重新定义使用C或C++的关键字</li>
<li>建议使用typedef在统一的变量声明头文件中对基本的变量类型重新定义</li>
<li>避免将过程定义为参数</li>
<li>过程中避免使用过多的参数，建议不要超过20个</li>
<li>在结构体定义中谨慎使用位域</li>
<li>禁止在块中使用#define或#undef</li>
<li>谨慎使用#pragma</li>
<li>谨慎使用联合(union)的声明</li>
<li>在结构体中谨慎使用无名位域</li>
<li>main必须定义为int main(void)或int main(int,char*[])的形式</li>
<li>循环体必须用大括号括起来</li>
<li>then/else中的语句必须用大括号括起来</li>
<li>逻辑表达式的连接必须使用括号</li>
<li>禁止在头文件前有可执行的代码</li>
<li>宏参数必须用括号括起来</li>
<li>嵌入汇编程序的过程必须是纯汇编程序</li>
<li>头文件名禁止使用“‘”,”、”,”\”和”#”等字符</li>
<li>禁止字符串中单独使用”\”，字符串的终止必须使用”\0”</li>
<li>建议一个文件中的程序总行不超过200行</li>
<li>建议一个过程或函数中的程序总行不超过200行</li>
<li>禁止条件判别成立时相应分支无可执行语句</li>
<li>在if…else if语句中必须使用else分支</li>
<li>禁止条件判别的else分支无可执行语句</li>
<li>在switch语句中必须使用default语句</li>
<li>禁止使用空switch语句</li>
<li>禁止switch语句中只包含defau语句</li>
<li>禁止switch的case语句不是由break终止</li>
<li>禁止switch的case语句中无任何可执行语句</li>
<li>禁止将参数指针赋值给过程指针</li>
<li>禁止将指针的指针超过两级</li>
<li>禁止将过程声明为指针类型</li>
<li>谨慎使用指针的逻辑比较</li>
<li>谨慎对指针进行代数运算</li>
<li>禁止直接从过程中跳出</li>
<li>禁止使用goto语句</li>
<li>避免使用setimp/longimp</li>
<li>禁止在非赋值表达式中出现赋值操作符</li>
<li>禁止对常数值做逻辑非的运算</li>
<li>禁止对有符号类型使用位运算</li>
<li>禁止对枚举类型的越限使用</li>
<li>禁止在逻辑表达式中使用赋值操作福</li>
<li>禁止赋值操作符与“&amp;&amp;”，“||”连用</li>
<li>禁止位操作符带有布尔型的操作数</li>
<li>禁止位操作符作用于布尔值</li>
<li>数组的使用必须保证不会出现越界</li>
<li>禁止对有符号的类型进行位运算</li>
<li>对变量进行位运算必须保证不会产生溢出</li>
<li>禁止给无符号变量赋负值</li>
<li>有符号类型的长度必须大于等于两位</li>
<li>位的定义必须是由符号整数或无符号整数</li>
<li>禁止给变量赋的值与变量的类型不一致</li>
<li>赋值类型必须匹配</li>
<li>避免使用逗号操作符</li>
<li>谨防长度操作符sizeof的副作用</li>
<li>谨慎使用不同类型变量的混合运算</li>
<li>避免由于设计的原因导致某些代码不能执行</li>
<li>主过程所在的文件中禁止有未被该文件中任何过程调用的子过程</li>
<li>static类型的过程在所在的文件中必须被调用</li>
<li>禁止使用被禁用的过程、函数、文件或名称</li>
<li>禁止用一个表达式中调用多个相关函数</li>
<li>禁止void类型的变量作为参数进行传递</li>
<li>禁止实参和形参类型不一致</li>
<li>避免过程参数在过程调用中未被使用</li>
<li>避免以非调用方式使用函数</li>
<li>谨慎使用abort，exit等函数</li>
<li>禁止单独使用小写字母”i”或大写字母”O”作为变量名</li>
<li>禁止三字母词的使用</li>
<li>使用八进制数必须加以注释</li>
<li>避免使用”+=”或”-=”操作符</li>
<li>谨慎使用”++”或”–”操作符</li>
<li>避免使用continue语句</li>
<li>谨慎使用三重表达式</li>
<li>避免使用不起作用的语句</li>
<li>避免使用空语句</li>
<li>谨慎使用寄存器变量</li>
<li>避免使用老的参数表的定义形式</li>
<li>函数必须有返回语句</li>
<li>禁止void类型的过程中的return语句带有返回值</li>
<li>有返回值的函数中，return必须带有返回值</li>
<li>函数返回类型必须一致</li>
</ol>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;启用规则&quot;&gt;&lt;a href=&quot;#启用规则&quot; class=&quot;headerlink&quot; title=&quot;启用规则&quot;&gt;&lt;/a&gt;启用规则&lt;/h1&gt;&lt;ol&gt;
&lt;li&gt;禁止使用嵌套的注释&lt;/li&gt;
&lt;li&gt;建议不适用单行的注释“//”&lt;/li&gt;
&lt;li&gt;禁止使用不适合的循环变量类
    
    </summary>
    
    
      <category term="GJB5369" scheme="http://www.z16388.top/tags/GJB5369/"/>
    
      <category term="软件测试" scheme="http://www.z16388.top/tags/%E8%BD%AF%E4%BB%B6%E6%B5%8B%E8%AF%95/"/>
    
  </entry>
  
</feed>
